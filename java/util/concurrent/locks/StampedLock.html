



<!DOCTYPE html>
<html lang="en">

<!-- Mirrored from developer.android.com/reference/java/util/concurrent/locks/StampedLock.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 03 Jul 2016 03:32:48 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>

  


<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
<meta content="IE=edge" http-equiv="X-UA-Compatible">




<script>var a=window.devsite||{};window.devsite=a;a.readyCallbacks=[];window.devsite.readyCallbacks=a.readyCallbacks;a.ready=function(b){a.readyCallbacks.push(b)};window.devsite.ready=a.ready;
</script>

<meta charset="utf-8">

<meta name="xsrf_token" content="QWlijBCsjqUl3VL8vnm9L8xXIWIOvBgkydHoqvPPHPY6MTQ2NzUxNjQxNTc1NTEyMA" />


  <link rel="canonical" href="StampedLock.html">



  
  <link rel="alternate"
    
        href="StampedLock.html"
    
        hreflang="en">
  


<link rel="shortcut icon" href="https://developer.android.com/favicon.ico">



<title>

  StampedLock | Android Developers

</title>
<meta name="description" content="None">

<!-- STYLESHEETS -->
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto+Condensed">
<link rel="stylesheet"
    href="http://fonts.googleapis.com/css?family=Roboto:light,regular,medium,thin,italic,mediumitalic,bold"
    title="roboto">




<link href="https://developer.android.com/static/css/default.css?v=2016070303" rel="stylesheet" type="text/css">
<!-- JAVASCRIPT -->
<script src="http://www.google.com/jsapi" type="text/javascript"></script>
<script src="https://developer.android.com/_static/c54aa247ac/js/android_3p-bundle.js" type="text/javascript"></script>


<script type="text/javascript">
  var toRoot = 'https://developer.android.com/';
  var metaTags = ""; 
  var useUpdatedTemplates = true;
  var devsiteLang = 'en';
  var pageType = 'develop';
  var ANDROID_LANGUAGES = [
    
      
      'en','es','in','ja','ko','pt-br','ru','vi','zh-cn','zh-tw'
    
  ];
</script>
<script src="https://developer.android.com/static/js/docs.js?v=2016070303" type="text/javascript"></script>


</head>

<body class="gc-documentation develop reference " itemscope itemtype="http://schema.org/Article">
  


  
    <input class="google-analytics-id-json" type="hidden" value="{&quot;dimensions&quot;: {&quot;dimension6&quot;: &quot;en&quot;, &quot;dimension5&quot;: &quot;en&quot;, &quot;dimension3&quot;: false, &quot;dimension8&quot;: null, &quot;dimension1&quot;: &quot;Signed out&quot;}, &quot;gaid&quot;: &quot;UA-49880327-2&quot;}">
  
    <input class="google-analytics-id-json" type="hidden" value="{&quot;dimensions&quot;: {&quot;dimension6&quot;: &quot;en&quot;, &quot;dimension5&quot;: &quot;en&quot;, &quot;dimension3&quot;: false, &quot;dimension8&quot;: null, &quot;dimension1&quot;: &quot;Signed out&quot;}, &quot;gaid&quot;: &quot;UA-5831155-1&quot;}">
  



  
  
    <script>
      var dataLayer = [{"freeTrialEligibleUser": "False", "language": {"requested": "en", "served": "en"}, "projectName": null, "scriptsafe": null, "signedIn": "False", "internalUser": "False"}];
    </script>
  



  <a href="#top" id="skip-to-main">Skip to content</a>
  <header id="header-wrapper">
    <div class="dac-header" id="header">
      <div class="dac-header-inner">
        <a class="dac-nav-toggle" data-dac-toggle-nav href="#" title="Open navigation">
          <span class="dac-nav-hamburger">
            <span class="dac-nav-hamburger-top"></span>
            <span class="dac-nav-hamburger-mid"></span>
            <span class="dac-nav-hamburger-bot"></span>
          </span>
        </a>
        
        <a class="dac-header-logo" href="https://developer.android.com/index.html">
          <img class="dac-header-logo-image" src="https://developer.android.com/static/images/android_logo.png"
              srcset="https://developer.android.com/static/images/android_logo_2x.png 2x"
              width="32" height="36" alt="Android"> Developers</a>
        <ul class="dac-header-tabs">
          <li>
            <a class="dac-header-tab" href="https://developer.android.com/design/index.html"
               zh-tw-lang="設計"
               zh-cn-lang="设计"
               ru-lang="Проектирование"
               ko-lang="디자인"
               ja-lang="設計"
               es-lang="Diseñar">Design</a>
          </li>
          <li>
            <a class="dac-header-tab" href="https://developer.android.com/develop/index.html"
               zh-tw-lang="開發"
               zh-cn-lang="开发"
               ru-lang="Разработка"
               ko-lang="개발"
               ja-lang="開発"
               es-lang="Desarrollar">Develop</a>
          </li>
          <li>
            <a class="dac-header-tab" href="https://developer.android.com/distribute/index.html"
               zh-tw-lang="發佈"
               zh-cn-lang="分发"
               ru-lang="Распространение"
               ko-lang="배포"
               ja-lang="配布"
               es-lang="Distribuir">Distribute</a>
          </li>
        </ul>
        <a class="dac-header-console-btn" href="https://play.google.com/apps/publish/">
          <span class="dac-sprite dac-google-play"></span>
          <span class="dac-visible-desktop-inline">Developer</span>
          Console
        </a>
        <form data-search="" class="dac-header-search">
  <button class="dac-header-search-close" data-search-close="">
    <i class="dac-sprite dac-back-arrow"></i>
  </button>

  <div class="dac-header-search-inner">
    <i class="dac-sprite dac-search-white dac-header-search-icon"></i>
    <input id="search_autocomplete" type="text" value="" autocomplete="off" name="q" class="dac-header-search-input" placeholder="Search">
    <button class="dac-header-search-clear dac-hidden" data-search-clear="">
      <i class="dac-sprite dac-close-black"></i>
    </button>
  </div>
</form>

        
      </div><!--/.header-wrap.wrap-->
    </div><!--/.header-->

    <div id="search-results" class="dac-search-results">
  <div id="dac-search-results-history" class="dac-search-results-history">
    <div class="wrap dac-search-results-history-wrap">
      <div class="cols">
        <div class="col-1of2 col-tablet-1of2 col-mobile-1of1">
          <h2>Most visited</h2>
          <div class="resource-flow-layout" data-history-query="history:most/visited" data-maxresults="3" data-cardsizes="18x2"></div>
        </div>

        <div class="col-1of2 col-tablet-1of2 col-mobile-1of1">
          <h2>Recently visited</h2>
          <div class="resource-flow-layout cols" data-history-query="history:recent" data-allow-duplicates="true" data-maxresults="3" data-cardsizes="18x2"></div>
        </div>
      </div>
    </div>
  </div>

  <div id="dac-search-results-content" class="dac-search-results-content">
    <div class="dac-search-results-metadata wrap">
      <div class="dac-search-results-for">
        <h2>Results for <span id="search-results-for"></span></h2>
      </div>

      <div id="dac-search-results-hero"></div>

      <div class="dac-search-results-hero cols">
        <div id="dac-search-results-reference" class="col-3of6 col-tablet-1of2 col-mobile-1of1">
          <div class="suggest-card reference no-display">
            <ul class="dac-search-results-reference">
            </ul>
          </div>
        </div>
        <div id="dac-custom-search-results"></div>
      </div>
    </div>

  </div>
</div>

  </header>

  <a name="navigation" tabindex=0 class="nav-start-marker">navigation</a>
  <nav class="dac-nav">
    <div class="dac-nav-dimmer" data-dac-toggle-nav></div>
    <div class="dac-nav-sidebar" data-swap data-dynamic="false" data-transition-speed="300" data-dac-nav>
      <div data-swap-container>
        
        <a class="dac-nav-back-button dac-swap-section dac-up dac-no-anim" tabindex=0 data-swap-button>
          
          <i class="dac-sprite dac-nav-back"></i> <span class="dac-nav-back-title">Back</span>
        </a>

        <div class="dac-nav-sub dac-swap-section dac-right dac-active" itemscope
            itemtype="http://schema.org/SiteNavigationElement">
          
          
            
              
              <button data-fullscreen="" class="dac-nav-fullscreen">
                <i class="dac-sprite dac-fullscreen"></i>
              </button>
              <script>$('[data-fullscreen]').dacFullscreen();</script>
              <div id="devdoc-nav">
                <div id="api-nav-header">
                  <div id="api-level-toggle">
                    <label for="apiLevelCheckbox" class="disabled"
                        title="Select your target API level to dim
                            unavailable APIs">API level:
                    </label>
                    <div class="select-wrapper">
                      <select id="apiLevelSelector"></select>
                    </div>
                  </div><!-- end toggle -->
                  <div id="api-nav-title">Android APIs</div>
                </div><!-- end nav header -->
                <script>
                  buildApiLevelSelector();
                </script>
                <div class="dac-reference-nav" data-reference-tree="">
                  <ul class="dac-reference-nav-list" data-reference-namespaces="">
                    <li class="api apilevel-1"><a href="../../../../android/package-summary.html" >android</a></li><li class="api apilevel-4"><a href="../../../../android/accessibilityservice/package-summary.html" >android.accessibilityservice</a></li><li class="api apilevel-5"><a href="../../../../android/accounts/package-summary.html" >android.accounts</a></li><li class="api apilevel-11"><a href="../../../../android/animation/package-summary.html" >android.animation</a></li><li class="api apilevel-16"><a href="../../../../android/annotation/package-summary.html" >android.annotation</a></li><li class="api apilevel-1"><a href="../../../../android/app/package-summary.html" >android.app</a></li><li class="api apilevel-8"><a href="../../../../android/app/admin/package-summary.html" >android.app.admin</a></li><li class="api apilevel-23"><a href="../../../../android/app/assist/package-summary.html" >android.app.assist</a></li><li class="api apilevel-8"><a href="../../../../android/app/backup/package-summary.html" >android.app.backup</a></li><li class="api apilevel-21"><a href="../../../../android/app/job/package-summary.html" >android.app.job</a></li><li class="api apilevel-21"><a href="../../../../android/app/usage/package-summary.html" >android.app.usage</a></li><li class="api apilevel-3"><a href="../../../../android/appwidget/package-summary.html" >android.appwidget</a></li><li class="api apilevel-5"><a href="../../../../android/bluetooth/package-summary.html" >android.bluetooth</a></li><li class="api apilevel-21"><a href="../../../../android/bluetooth/le/package-summary.html" >android.bluetooth.le</a></li><li class="api apilevel-1"><a href="../../../../android/content/package-summary.html" >android.content</a></li><li class="api apilevel-1"><a href="../../../../android/content/pm/package-summary.html" >android.content.pm</a></li><li class="api apilevel-1"><a href="../../../../android/content/res/package-summary.html" >android.content.res</a></li><li class="api apilevel-1"><a href="../../../../android/database/package-summary.html" >android.database</a></li><li class="api apilevel-1"><a href="../../../../android/database/sqlite/package-summary.html" >android.database.sqlite</a></li><li class="api apilevel-"><a href="../../../../android/databinding/package-summary.html" >android.databinding</a></li><li class="api apilevel-11"><a href="../../../../android/drm/package-summary.html" >android.drm</a></li><li class="api apilevel-4"><a href="../../../../android/gesture/package-summary.html" >android.gesture</a></li><li class="api apilevel-1"><a href="../../../../android/graphics/package-summary.html" >android.graphics</a></li><li class="api apilevel-1"><a href="../../../../android/graphics/drawable/package-summary.html" >android.graphics.drawable</a></li><li class="api apilevel-1"><a href="../../../../android/graphics/drawable/shapes/package-summary.html" >android.graphics.drawable.shapes</a></li><li class="api apilevel-19"><a href="../../../../android/graphics/pdf/package-summary.html" >android.graphics.pdf</a></li><li class="api apilevel-1"><a href="../../../../android/hardware/package-summary.html" >android.hardware</a></li><li class="api apilevel-21"><a href="../../../../android/hardware/camera2/package-summary.html" >android.hardware.camera2</a></li><li class="api apilevel-21"><a href="../../../../android/hardware/camera2/params/package-summary.html" >android.hardware.camera2.params</a></li><li class="api apilevel-17"><a href="../../../../android/hardware/display/package-summary.html" >android.hardware.display</a></li><li class="api apilevel-23"><a href="../../../../android/hardware/fingerprint/package-summary.html" >android.hardware.fingerprint</a></li><li class="api apilevel-16"><a href="../../../../android/hardware/input/package-summary.html" >android.hardware.input</a></li><li class="api apilevel-12"><a href="../../../../android/hardware/usb/package-summary.html" >android.hardware.usb</a></li><li class="api apilevel-24"><a href="../../../../android/icu/lang/package-summary.html" >android.icu.lang</a></li><li class="api apilevel-24"><a href="../../../../android/icu/math/package-summary.html" >android.icu.math</a></li><li class="api apilevel-24"><a href="../../../../android/icu/text/package-summary.html" >android.icu.text</a></li><li class="api apilevel-24"><a href="../../../../android/icu/util/package-summary.html" >android.icu.util</a></li><li class="api apilevel-3"><a href="../../../../android/inputmethodservice/package-summary.html" >android.inputmethodservice</a></li><li class="api apilevel-1"><a href="../../../../android/location/package-summary.html" >android.location</a></li><li class="api apilevel-1"><a href="../../../../android/media/package-summary.html" >android.media</a></li><li class="api apilevel-9"><a href="../../../../android/media/audiofx/package-summary.html" >android.media.audiofx</a></li><li class="api apilevel-21"><a href="../../../../android/media/browse/package-summary.html" >android.media.browse</a></li><li class="api apilevel-14"><a href="../../../../android/media/effect/package-summary.html" >android.media.effect</a></li><li class="api apilevel-23"><a href="../../../../android/media/midi/package-summary.html" >android.media.midi</a></li><li class="api apilevel-21"><a href="../../../../android/media/projection/package-summary.html" >android.media.projection</a></li><li class="api apilevel-21"><a href="../../../../android/media/session/package-summary.html" >android.media.session</a></li><li class="api apilevel-21"><a href="../../../../android/media/tv/package-summary.html" >android.media.tv</a></li><li class="api apilevel-12"><a href="../../../../android/mtp/package-summary.html" >android.mtp</a></li><li class="api apilevel-1"><a href="../../../../android/net/package-summary.html" >android.net</a></li><li class="api apilevel-1"><a href="../../../../android/net/http/package-summary.html" >android.net.http</a></li><li class="api apilevel-16"><a href="../../../../android/net/nsd/package-summary.html" >android.net.nsd</a></li><li class="api apilevel-12"><a href="../../../../android/net/rtp/package-summary.html" >android.net.rtp</a></li><li class="api apilevel-9"><a href="../../../../android/net/sip/package-summary.html" >android.net.sip</a></li><li class="api apilevel-1"><a href="../../../../android/net/wifi/package-summary.html" >android.net.wifi</a></li><li class="api apilevel-14"><a href="../../../../android/net/wifi/p2p/package-summary.html" >android.net.wifi.p2p</a></li><li class="api apilevel-16"><a href="../../../../android/net/wifi/p2p/nsd/package-summary.html" >android.net.wifi.p2p.nsd</a></li><li class="api apilevel-9"><a href="../../../../android/nfc/package-summary.html" >android.nfc</a></li><li class="api apilevel-19"><a href="../../../../android/nfc/cardemulation/package-summary.html" >android.nfc.cardemulation</a></li><li class="api apilevel-10"><a href="../../../../android/nfc/tech/package-summary.html" >android.nfc.tech</a></li><li class="api apilevel-1"><a href="../../../../android/opengl/package-summary.html" >android.opengl</a></li><li class="api apilevel-1"><a href="../../../../android/os/package-summary.html" >android.os</a></li><li class="api apilevel-24"><a href="../../../../android/os/health/package-summary.html" >android.os.health</a></li><li class="api apilevel-9"><a href="../../../../android/os/storage/package-summary.html" >android.os.storage</a></li><li class="api apilevel-1"><a href="../../../../android/preference/package-summary.html" >android.preference</a></li><li class="api apilevel-19"><a href="../../../../android/print/package-summary.html" >android.print</a></li><li class="api apilevel-19"><a href="../../../../android/print/pdf/package-summary.html" >android.print.pdf</a></li><li class="api apilevel-19"><a href="../../../../android/printservice/package-summary.html" >android.printservice</a></li><li class="api apilevel-1"><a href="../../../../android/provider/package-summary.html" >android.provider</a></li><li class="api apilevel-11"><a href="../../../../android/renderscript/package-summary.html" >android.renderscript</a></li><li class="api apilevel-1"><a href="../../../../android/sax/package-summary.html" >android.sax</a></li><li class="api apilevel-14"><a href="../../../../android/security/package-summary.html" >android.security</a></li><li class="api apilevel-23"><a href="../../../../android/security/keystore/package-summary.html" >android.security.keystore</a></li><li class="api apilevel-22"><a href="../../../../android/service/carrier/package-summary.html" >android.service.carrier</a></li><li class="api apilevel-23"><a href="../../../../android/service/chooser/package-summary.html" >android.service.chooser</a></li><li class="api apilevel-17"><a href="../../../../android/service/dreams/package-summary.html" >android.service.dreams</a></li><li class="api apilevel-21"><a href="../../../../android/service/media/package-summary.html" >android.service.media</a></li><li class="api apilevel-18"><a href="../../../../android/service/notification/package-summary.html" >android.service.notification</a></li><li class="api apilevel-24"><a href="../../../../android/service/quicksettings/package-summary.html" >android.service.quicksettings</a></li><li class="api apilevel-21"><a href="../../../../android/service/restrictions/package-summary.html" >android.service.restrictions</a></li><li class="api apilevel-14"><a href="../../../../android/service/textservice/package-summary.html" >android.service.textservice</a></li><li class="api apilevel-21"><a href="../../../../android/service/voice/package-summary.html" >android.service.voice</a></li><li class="api apilevel-24"><a href="../../../../android/service/vr/package-summary.html" >android.service.vr</a></li><li class="api apilevel-7"><a href="../../../../android/service/wallpaper/package-summary.html" >android.service.wallpaper</a></li><li class="api apilevel-3"><a href="../../../../android/speech/package-summary.html" >android.speech</a></li><li class="api apilevel-4"><a href="../../../../android/speech/tts/package-summary.html" >android.speech.tts</a></li><li class="api apilevel-"><a href="../../../../android/support/annotation/package-summary.html" >android.support.annotation</a></li><li class="api apilevel-"><a href="../../../../android/support/annotations/package-summary.html" >android.support.annotations</a></li><li class="api apilevel-"><a href="../../../../android/support/app/recommendation/package-summary.html" >android.support.app.recommendation</a></li><li class="api apilevel-"><a href="../../../../android/support/customtabs/package-summary.html" >android.support.customtabs</a></li><li class="api apilevel-"><a href="../../../../android/support/design/package-summary.html" >android.support.design</a></li><li class="api apilevel-"><a href="../../../../android/support/design/widget/package-summary.html" >android.support.design.widget</a></li><li class="api apilevel-"><a href="../../../../android/support/graphics/drawable/package-summary.html" >android.support.graphics.drawable</a></li><li class="api apilevel-"><a href="../../../../android/support/multidex/package-summary.html" >android.support.multidex</a></li><li class="api apilevel-"><a href="../../../../android/support/percent/package-summary.html" >android.support.percent</a></li><li class="api apilevel-"><a href="../../../../android/support/provider/package-summary.html" >android.support.provider</a></li><li class="api apilevel-"><a href="../../../../android/support/v13/app/package-summary.html" >android.support.v13.app</a></li><li class="api apilevel-"><a href="../../../../android/support/v13/view/package-summary.html" >android.support.v13.view</a></li><li class="api apilevel-"><a href="../../../../android/support/v14/preference/package-summary.html" >android.support.v14.preference</a></li><li class="api apilevel-"><a href="../../../../android/support/v17/leanback/package-summary.html" >android.support.v17.leanback</a></li><li class="api apilevel-"><a href="../../../../android/support/v17/leanback/app/package-summary.html" >android.support.v17.leanback.app</a></li><li class="api apilevel-"><a href="../../../../android/support/v17/leanback/database/package-summary.html" >android.support.v17.leanback.database</a></li><li class="api apilevel-"><a href="../../../../android/support/v17/leanback/graphics/package-summary.html" >android.support.v17.leanback.graphics</a></li><li class="api apilevel-"><a href="../../../../android/support/v17/leanback/system/package-summary.html" >android.support.v17.leanback.system</a></li><li class="api apilevel-"><a href="../../../../android/support/v17/leanback/widget/package-summary.html" >android.support.v17.leanback.widget</a></li><li class="api apilevel-"><a href="../../../../android/support/v17/leanback/widget/picker/package-summary.html" >android.support.v17.leanback.widget.picker</a></li><li class="api apilevel-"><a href="../../../../android/support/v17/preference/package-summary.html" >android.support.v17.preference</a></li><li class="api apilevel-"><a href="../../../../android/support/v4/package-summary.html" >android.support.v4</a></li><li class="api apilevel-"><a href="../../../../android/support/v4/accessibilityservice/package-summary.html" >android.support.v4.accessibilityservice</a></li><li class="api apilevel-"><a href="../../../../android/support/v4/app/package-summary.html" >android.support.v4.app</a></li><li class="api apilevel-"><a href="../../../../android/support/v4/content/package-summary.html" >android.support.v4.content</a></li><li class="api apilevel-"><a href="../../../../android/support/v4/content/pm/package-summary.html" >android.support.v4.content.pm</a></li><li class="api apilevel-"><a href="../../../../android/support/v4/content/res/package-summary.html" >android.support.v4.content.res</a></li><li class="api apilevel-"><a href="../../../../android/support/v4/database/package-summary.html" >android.support.v4.database</a></li><li class="api apilevel-"><a href="../../../../android/support/v4/graphics/package-summary.html" >android.support.v4.graphics</a></li><li class="api apilevel-"><a href="../../../../android/support/v4/graphics/drawable/package-summary.html" >android.support.v4.graphics.drawable</a></li><li class="api apilevel-"><a href="../../../../android/support/v4/hardware/display/package-summary.html" >android.support.v4.hardware.display</a></li><li class="api apilevel-"><a href="../../../../android/support/v4/hardware/fingerprint/package-summary.html" >android.support.v4.hardware.fingerprint</a></li><li class="api apilevel-"><a href="../../../../android/support/v4/media/package-summary.html" >android.support.v4.media</a></li><li class="api apilevel-"><a href="../../../../android/support/v4/media/session/package-summary.html" >android.support.v4.media.session</a></li><li class="api apilevel-"><a href="../../../../android/support/v4/net/package-summary.html" >android.support.v4.net</a></li><li class="api apilevel-"><a href="../../../../android/support/v4/os/package-summary.html" >android.support.v4.os</a></li><li class="api apilevel-"><a href="../../../../android/support/v4/print/package-summary.html" >android.support.v4.print</a></li><li class="api apilevel-"><a href="../../../../android/support/v4/provider/package-summary.html" >android.support.v4.provider</a></li><li class="api apilevel-"><a href="../../../../android/support/v4/text/package-summary.html" >android.support.v4.text</a></li><li class="api apilevel-"><a href="../../../../android/support/v4/util/package-summary.html" >android.support.v4.util</a></li><li class="api apilevel-"><a href="../../../../android/support/v4/view/package-summary.html" >android.support.v4.view</a></li><li class="api apilevel-"><a href="../../../../android/support/v4/view/accessibility/package-summary.html" >android.support.v4.view.accessibility</a></li><li class="api apilevel-"><a href="../../../../android/support/v4/view/animation/package-summary.html" >android.support.v4.view.animation</a></li><li class="api apilevel-"><a href="../../../../android/support/v4/widget/package-summary.html" >android.support.v4.widget</a></li><li class="api apilevel-"><a href="../../../../android/support/v7/app/package-summary.html" >android.support.v7.app</a></li><li class="api apilevel-"><a href="../../../../android/support/v7/appcompat/package-summary.html" >android.support.v7.appcompat</a></li><li class="api apilevel-"><a href="../../../../android/support/v7/cardview/package-summary.html" >android.support.v7.cardview</a></li><li class="api apilevel-"><a href="../../../../android/support/v7/content/res/package-summary.html" >android.support.v7.content.res</a></li><li class="api apilevel-"><a href="../../../../android/support/v7/graphics/package-summary.html" >android.support.v7.graphics</a></li><li class="api apilevel-"><a href="../../../../android/support/v7/graphics/drawable/package-summary.html" >android.support.v7.graphics.drawable</a></li><li class="api apilevel-"><a href="../../../../android/support/v7/gridlayout/package-summary.html" >android.support.v7.gridlayout</a></li><li class="api apilevel-"><a href="../../../../android/support/v7/media/package-summary.html" >android.support.v7.media</a></li><li class="api apilevel-"><a href="../../../../android/support/v7/mediarouter/package-summary.html" >android.support.v7.mediarouter</a></li><li class="api apilevel-"><a href="../../../../android/support/v7/palette/package-summary.html" >android.support.v7.palette</a></li><li class="api apilevel-"><a href="../../../../android/support/v7/preference/package-summary.html" >android.support.v7.preference</a></li><li class="api apilevel-"><a href="../../../../android/support/v7/recyclerview/package-summary.html" >android.support.v7.recyclerview</a></li><li class="api apilevel-"><a href="../../../../android/support/v7/util/package-summary.html" >android.support.v7.util</a></li><li class="api apilevel-"><a href="../../../../android/support/v7/view/package-summary.html" >android.support.v7.view</a></li><li class="api apilevel-"><a href="../../../../android/support/v7/widget/package-summary.html" >android.support.v7.widget</a></li><li class="api apilevel-"><a href="../../../../android/support/v7/widget/helper/package-summary.html" >android.support.v7.widget.helper</a></li><li class="api apilevel-"><a href="../../../../android/support/v7/widget/util/package-summary.html" >android.support.v7.widget.util</a></li><li class="api apilevel-"><a href="../../../../android/support/v8/renderscript/package-summary.html" >android.support.v8.renderscript</a></li><li class="api apilevel-21"><a href="../../../../android/system/package-summary.html" >android.system</a></li><li class="api apilevel-21"><a href="../../../../android/telecom/package-summary.html" >android.telecom</a></li><li class="api apilevel-1"><a href="../../../../android/telephony/package-summary.html" >android.telephony</a></li><li class="api apilevel-5"><a href="../../../../android/telephony/cdma/package-summary.html" >android.telephony.cdma</a></li><li class="api apilevel-1"><a href="../../../../android/telephony/gsm/package-summary.html" >android.telephony.gsm</a></li><li class="api apilevel-1"><a href="../../../../android/test/package-summary.html" >android.test</a></li><li class="api apilevel-1"><a href="../../../../android/test/mock/package-summary.html" >android.test.mock</a></li><li class="api apilevel-1"><a href="../../../../android/test/suitebuilder/package-summary.html" >android.test.suitebuilder</a></li><li class="api apilevel-1"><a href="../../../../android/test/suitebuilder/annotation/package-summary.html" >android.test.suitebuilder.annotation</a></li><li class="api apilevel-1"><a href="../../../../android/text/package-summary.html" >android.text</a></li><li class="api apilevel-3"><a href="../../../../android/text/format/package-summary.html" >android.text.format</a></li><li class="api apilevel-1"><a href="../../../../android/text/method/package-summary.html" >android.text.method</a></li><li class="api apilevel-1"><a href="../../../../android/text/style/package-summary.html" >android.text.style</a></li><li class="api apilevel-1"><a href="../../../../android/text/util/package-summary.html" >android.text.util</a></li><li class="api apilevel-19"><a href="../../../../android/transition/package-summary.html" >android.transition</a></li><li class="api apilevel-1"><a href="../../../../android/util/package-summary.html" >android.util</a></li><li class="api apilevel-1"><a href="../../../../android/view/package-summary.html" >android.view</a></li><li class="api apilevel-4"><a href="../../../../android/view/accessibility/package-summary.html" >android.view.accessibility</a></li><li class="api apilevel-1"><a href="../../../../android/view/animation/package-summary.html" >android.view.animation</a></li><li class="api apilevel-3"><a href="../../../../android/view/inputmethod/package-summary.html" >android.view.inputmethod</a></li><li class="api apilevel-14"><a href="../../../../android/view/textservice/package-summary.html" >android.view.textservice</a></li><li class="api apilevel-1"><a href="../../../../android/webkit/package-summary.html" >android.webkit</a></li><li class="api apilevel-1"><a href="../../../../android/widget/package-summary.html" >android.widget</a></li><li class="api apilevel-"><a href="../../../../com/android/test/runner/package-summary.html" >com.android.test.runner</a></li><li class="api apilevel-1"><a href="../../../../dalvik/annotation/package-summary.html" >dalvik.annotation</a></li><li class="api apilevel-1"><a href="../../../../dalvik/bytecode/package-summary.html" >dalvik.bytecode</a></li><li class="api apilevel-1"><a href="../../../../dalvik/system/package-summary.html" >dalvik.system</a></li><li class="api apilevel-1"><a href="../../../awt/font/package-summary.html" >java.awt.font</a></li><li class="api apilevel-3"><a href="../../../beans/package-summary.html" >java.beans</a></li><li class="api apilevel-1"><a href="../../../io/package-summary.html" >java.io</a></li><li class="api apilevel-1"><a href="../../../lang/package-summary.html" >java.lang</a></li><li class="api apilevel-1"><a href="../../../lang/annotation/package-summary.html" >java.lang.annotation</a></li><li class="api apilevel-1"><a href="../../../lang/ref/package-summary.html" >java.lang.ref</a></li><li class="api apilevel-1"><a href="../../../lang/reflect/package-summary.html" >java.lang.reflect</a></li><li class="api apilevel-1"><a href="../../../math/package-summary.html" >java.math</a></li><li class="api apilevel-1"><a href="../../../net/package-summary.html" >java.net</a></li><li class="api apilevel-1"><a href="../../../nio/package-summary.html" >java.nio</a></li><li class="api apilevel-1"><a href="../../../nio/channels/package-summary.html" >java.nio.channels</a></li><li class="api apilevel-1"><a href="../../../nio/channels/spi/package-summary.html" >java.nio.channels.spi</a></li><li class="api apilevel-1"><a href="../../../nio/charset/package-summary.html" >java.nio.charset</a></li><li class="api apilevel-1"><a href="../../../nio/charset/spi/package-summary.html" >java.nio.charset.spi</a></li><li class="api apilevel-1"><a href="../../../security/package-summary.html" >java.security</a></li><li class="api apilevel-1"><a href="../../../security/acl/package-summary.html" >java.security.acl</a></li><li class="api apilevel-1"><a href="../../../security/cert/package-summary.html" >java.security.cert</a></li><li class="api apilevel-1"><a href="../../../security/interfaces/package-summary.html" >java.security.interfaces</a></li><li class="api apilevel-1"><a href="../../../security/spec/package-summary.html" >java.security.spec</a></li><li class="api apilevel-1"><a href="../../../sql/package-summary.html" >java.sql</a></li><li class="api apilevel-1"><a href="../../../text/package-summary.html" >java.text</a></li><li class="api apilevel-1"><a href="../../package-summary.html" >java.util</a></li><li class="api apilevel-1"><a href="../package-summary.html" >java.util.concurrent</a></li><li class="api apilevel-1"><a href="../atomic/package-summary.html" >java.util.concurrent.atomic</a></li><li class="api apilevel-1"><a href="package-summary.html" >java.util.concurrent.locks</a></li><li class="api apilevel-24"><a href="../../function/package-summary.html" >java.util.function</a></li><li class="api apilevel-1"><a href="../../jar/package-summary.html" >java.util.jar</a></li><li class="api apilevel-1"><a href="../../logging/package-summary.html" >java.util.logging</a></li><li class="api apilevel-1"><a href="../../prefs/package-summary.html" >java.util.prefs</a></li><li class="api apilevel-1"><a href="../../regex/package-summary.html" >java.util.regex</a></li><li class="api apilevel-24"><a href="../../stream/package-summary.html" >java.util.stream</a></li><li class="api apilevel-1"><a href="../../zip/package-summary.html" >java.util.zip</a></li><li class="api apilevel-1"><a href="../../../../javax/crypto/package-summary.html" >javax.crypto</a></li><li class="api apilevel-1"><a href="../../../../javax/crypto/interfaces/package-summary.html" >javax.crypto.interfaces</a></li><li class="api apilevel-1"><a href="../../../../javax/crypto/spec/package-summary.html" >javax.crypto.spec</a></li><li class="api apilevel-1"><a href="../../../../javax/microedition/khronos/egl/package-summary.html" >javax.microedition.khronos.egl</a></li><li class="api apilevel-1"><a href="../../../../javax/microedition/khronos/opengles/package-summary.html" >javax.microedition.khronos.opengles</a></li><li class="api apilevel-1"><a href="../../../../javax/net/package-summary.html" >javax.net</a></li><li class="api apilevel-1"><a href="../../../../javax/net/ssl/package-summary.html" >javax.net.ssl</a></li><li class="api apilevel-1"><a href="../../../../javax/security/auth/package-summary.html" >javax.security.auth</a></li><li class="api apilevel-1"><a href="../../../../javax/security/auth/callback/package-summary.html" >javax.security.auth.callback</a></li><li class="api apilevel-1"><a href="../../../../javax/security/auth/login/package-summary.html" >javax.security.auth.login</a></li><li class="api apilevel-1"><a href="../../../../javax/security/auth/x500/package-summary.html" >javax.security.auth.x500</a></li><li class="api apilevel-1"><a href="../../../../javax/security/cert/package-summary.html" >javax.security.cert</a></li><li class="api apilevel-1"><a href="../../../../javax/sql/package-summary.html" >javax.sql</a></li><li class="api apilevel-1"><a href="../../../../javax/xml/package-summary.html" >javax.xml</a></li><li class="api apilevel-8"><a href="../../../../javax/xml/datatype/package-summary.html" >javax.xml.datatype</a></li><li class="api apilevel-8"><a href="../../../../javax/xml/namespace/package-summary.html" >javax.xml.namespace</a></li><li class="api apilevel-1"><a href="../../../../javax/xml/parsers/package-summary.html" >javax.xml.parsers</a></li><li class="api apilevel-8"><a href="../../../../javax/xml/transform/package-summary.html" >javax.xml.transform</a></li><li class="api apilevel-8"><a href="../../../../javax/xml/transform/dom/package-summary.html" >javax.xml.transform.dom</a></li><li class="api apilevel-8"><a href="../../../../javax/xml/transform/sax/package-summary.html" >javax.xml.transform.sax</a></li><li class="api apilevel-8"><a href="../../../../javax/xml/transform/stream/package-summary.html" >javax.xml.transform.stream</a></li><li class="api apilevel-8"><a href="../../../../javax/xml/validation/package-summary.html" >javax.xml.validation</a></li><li class="api apilevel-8"><a href="../../../../javax/xml/xpath/package-summary.html" >javax.xml.xpath</a></li><li class="api apilevel-1"><a href="../../../../junit/framework/package-summary.html" >junit.framework</a></li><li class="api apilevel-1"><a href="../../../../junit/runner/package-summary.html" >junit.runner</a></li><li class="api apilevel-1"><a href="../../../../org/apache/http/conn/package-summary.html" >org.apache.http.conn</a></li><li class="api apilevel-1"><a href="../../../../org/apache/http/conn/scheme/package-summary.html" >org.apache.http.conn.scheme</a></li><li class="api apilevel-1"><a href="../../../../org/apache/http/conn/ssl/package-summary.html" >org.apache.http.conn.ssl</a></li><li class="api apilevel-1"><a href="../../../../org/apache/http/params/package-summary.html" >org.apache.http.params</a></li><li class="api apilevel-1"><a href="../../../../org/json/package-summary.html" >org.json</a></li><li class="api apilevel-1"><a href="../../../../org/w3c/dom/package-summary.html" >org.w3c.dom</a></li><li class="api apilevel-8"><a href="../../../../org/w3c/dom/ls/package-summary.html" >org.w3c.dom.ls</a></li><li class="api apilevel-1"><a href="../../../../org/xml/sax/package-summary.html" >org.xml.sax</a></li><li class="api apilevel-1"><a href="../../../../org/xml/sax/ext/package-summary.html" >org.xml.sax.ext</a></li><li class="api apilevel-1"><a href="../../../../org/xml/sax/helpers/package-summary.html" >org.xml.sax.helpers</a></li><li class="api apilevel-1"><a href="../../../../org/xmlpull/v1/package-summary.html" >org.xmlpull.v1</a></li><li class="api apilevel-1"><a href="../../../../org/xmlpull/v1/sax2/package-summary.html" >org.xmlpull.v1.sax2</a></li>
                  </ul>
                </div>
              </div>
            
          
        </div>
        
        
          


<ul id="dac-main-navigation" class="dac-nav-list dac-swap-section dac-left dac-no-anim" tabindex=0>
  <li class="dac-nav-item home">
    <a class="dac-nav-link" href="https://developer.android.com/index.html">Home</a>
    <i class="dac-sprite dac-expand-more-black dac-nav-sub-slider" tabindex=0></i>
    <ul class="dac-nav-secondary about">
      <li class="dac-nav-item versions">
        <a class="dac-nav-link" href="https://developer.android.com/about/versions/marshmallow/index.html">Android</a>
      </li>
      <li class="dac-nav-item wear">
        <a class="dac-nav-link" href="https://developer.android.com/wear/index.html">Wear</a>
      </li>
      <li class="dac-nav-item tv">
        <a class="dac-nav-link" href="https://developer.android.com/tv/index.html">TV</a>
      </li>
      <li class="dac-nav-item auto">
        <a class="dac-nav-link" href="https://developer.android.com/auto/index.html">Auto</a>
      </li>
    </ul>
  </li>
  <li class="dac-nav-item design">
    <a class="dac-nav-link" href="https://developer.android.com/design/index.html"
       zh-tw-lang="設計"
       zh-cn-lang="设计"
       ru-lang="Проектирование"
       ko-lang="디자인"
       ja-lang="設計"
       es-lang="Diseñar">Design</a>
  </li>
  <li class="dac-nav-item develop">
    <a class="dac-nav-link" href="https://developer.android.com/develop/index.html"
       zh-tw-lang="開發"
       zh-cn-lang="开发"
       ru-lang="Разработка"
       ko-lang="개발"
       ja-lang="開発"
       es-lang="Desarrollar">Develop</a>
    <i class="dac-sprite dac-expand-more-black dac-nav-sub-slider" tabindex=0></i>
    <ul class="dac-nav-secondary develop">
      <li class="dac-nav-item training">
        <a class="dac-nav-link" href="https://developer.android.com/training/index.html"
           zh-tw-lang="訓練課程"
           zh-cn-lang="培训"
           ru-lang="Курсы"
           ko-lang="교육"
           ja-lang="トレーニング"
           es-lang="Capacitación">Training</a>
      </li>
      <li class="dac-nav-item guide">
        <a class="dac-nav-link" href="https://developer.android.com/guide/index.html"
           zh-tw-lang="API 指南"
           zh-cn-lang="API 指南"
           ru-lang="Руководства по API"
           ko-lang="API 가이드"
           ja-lang="API ガイド"
           es-lang="Guías de la API">API Guides</a>
      </li>
      <li class="dac-nav-item reference">
        <a class="dac-nav-link" href="../../../../packages.html"
           zh-tw-lang="參考資源"
           zh-cn-lang="参考"
           ru-lang="Справочник"
           ko-lang="참조문서"
           ja-lang="リファレンス"
           es-lang="Referencia">Reference</a>
      </li>
      <li class="dac-nav-item samples">
        <a class="dac-nav-link" href="https://developer.android.com/samples/index.html">Samples</a>
      </li>
      <li class="dac-nav-item studio">
        <a class="dac-nav-link" href="https://developer.android.com/studio/index.html"
           >Android Studio</a></li>
      <li class="dac-nav-item ndk">
        <a class="dac-nav-link" href="https://developer.android.com/ndk/index.html"
           >Android NDK</a></li>
      <li class="dac-nav-item google">
        <a class="dac-nav-link" href="https://developer.android.com/google/index.html">Google Services</a>
      </li>
    </ul>
  </li>
  <li class="dac-nav-item distribute">
    <a class="dac-nav-link" href="https://developer.android.com/distribute/index.html"
       zh-tw-lang="發佈"
       zh-cn-lang="分发"
       ru-lang="Распространение"
       ko-lang="배포"
       ja-lang="配布"
       es-lang="Distribuir">Distribute</a>
    <i class="dac-sprite dac-expand-more-black dac-nav-sub-slider" tabindex=0></i>
    <ul class="dac-nav-secondary distribute">
      <li class="dac-nav-item googleplay">
        <a class="dac-nav-link" href="https://developer.android.com/distribute/googleplay/index.html">Google Play</a></li>
      <li class="dac-nav-item essentials">
        <a class="dac-nav-link" href="https://developer.android.com/distribute/essentials/index.html">Essentials</a></li>
      <li class="dac-nav-item users">
        <a class="dac-nav-link" href="https://developer.android.com/distribute/users/index.html">Get Users</a></li>
      <li class="dac-nav-item engage">
        <a class="dac-nav-link" href="https://developer.android.com/distribute/engage/index.html">Engage &amp; Retain</a></li>
      <li class="dac-nav-item monetize">
        <a class="dac-nav-link" href="https://developer.android.com/distribute/monetize/index.html">Earn</a>
      </li>
      <li class="dac-nav-item analyze">
        <a class="dac-nav-link" href="https://developer.android.com/distribute/analyze/index.html">Analyze</a>
      </li>
      <li class="dac-nav-item stories">
        <a class="dac-nav-link" href="https://developer.android.com/distribute/stories/index.html">Stories</a>
      </li>
    </ul>
  </li>
  
  <li class="dac-nav-item preview">
    <a class="dac-nav-link" href="https://developer.android.com/preview/index.html">Preview</a>
  </li>
  
</ul>

        
      </div>
    </div>
  </nav>

  <a name="top" tabindex="0"></a>
  
  <div class="wrap clearfix" id="body-content">
  
    
      
    

    
<div id="doc-api-level" class="24" style="display:none"></div>




<div id="naMessage"></div>

<div id="api-info-block">
<div class="api-level">
  
  Added in <a href="https://developer.android.com/guide/topics/manifest/uses-sdk-element.html#ApiLevels">API level 24</a>
  
  

</div>



  
   
  
  
  
  

  
  
  
  


<div class="sum-details-links">

Summary:









  <a href="#pubctors">Ctors</a>
  



  &#124; <a href="#pubmethods">Methods</a>
  



  &#124; <a href="#inhmethods">Inherited Methods</a>

&#124; <a href="#" onclick="return toggleAllClassInherited()" id="toggleAllClassInherited">[Expand All]</a>

</div><!-- end sum-details-links -->
</div><!-- end api-info-block -->

<div class="api apilevel-24" id="jd-content">

<!-- ======== START OF CLASS DATA ======== -->

<h1 class="api-title">StampedLock</h1>
<p>
<code class="api-signature">
  public
  
  
  
  class
  StampedLock
</code>
<br>


<code class="api-signature">
  
    extends <a href="../../../lang/Object.html">Object</a>
  
  
  
</code>

<code class="api-signature">
  
  
      implements
      
        <a href="../../../io/Serializable.html">Serializable</a>
      
  
  
</code>

</p><table class="jd-inheritance-table">


  <tr>
    
    <td colspan="2" class="jd-inheritance-class-cell"><a href="../../../lang/Object.html">java.lang.Object</a>
    </td>
  </tr>
  

  <tr>
    
      <td class="jd-inheritance-space">&nbsp;&nbsp;&nbsp;&#x21b3;</td>
    
    <td colspan="1" class="jd-inheritance-class-cell">java.util.concurrent.locks.StampedLock
    </td>
  </tr>
  

</table>
  

    

<br><hr>


  <p>A capability-based lock with three modes for controlling read/write
 access.  The state of a StampedLock consists of a version and mode.
 Lock acquisition methods return a stamp that represents and
 controls access with respect to a lock state; "try" versions of
 these methods may instead return the special value zero to
 represent failure to acquire access. Lock release and conversion
 methods require stamps as arguments, and fail if they do not match
 the state of the lock. The three modes are:

 <ul>

  <li><b>Writing.</b> Method <code><a href="StampedLock.html#writeLock()">writeLock()</a></code> possibly blocks
   waiting for exclusive access, returning a stamp that can be used
   in method <code><a href="StampedLock.html#unlockWrite(long)">unlockWrite(long)</a></code> to release the lock. Untimed and
   timed versions of <code>tryWriteLock</code> are also provided. When
   the lock is held in write mode, no read locks may be obtained,
   and all optimistic read validations will fail.

  <li><b>Reading.</b> Method <code><a href="StampedLock.html#readLock()">readLock()</a></code> possibly blocks
   waiting for non-exclusive access, returning a stamp that can be
   used in method <code><a href="StampedLock.html#unlockRead(long)">unlockRead(long)</a></code> to release the lock. Untimed
   and timed versions of <code>tryReadLock</code> are also provided.

  <li><b>Optimistic Reading.</b> Method <code><a href="StampedLock.html#tryOptimisticRead()">tryOptimisticRead()</a></code>
   returns a non-zero stamp only if the lock is not currently held
   in write mode. Method <code><a href="StampedLock.html#validate(long)">validate(long)</a></code> returns true if the lock
   has not been acquired in write mode since obtaining a given
   stamp.  This mode can be thought of as an extremely weak version
   of a read-lock, that can be broken by a writer at any time.  The
   use of optimistic mode for short read-only code segments often
   reduces contention and improves throughput.  However, its use is
   inherently fragile.  Optimistic read sections should only read
   fields and hold them in local variables for later use after
   validation. Fields read while in optimistic mode may be wildly
   inconsistent, so usage applies only when you are familiar enough
   with data representations to check consistency and/or repeatedly
   invoke method <code>validate()</code>.  For example, such steps are
   typically required when first reading an object or array
   reference, and then accessing one of its fields, elements or
   methods.

 </ul>

 <p>This class also supports methods that conditionally provide
 conversions across the three modes. For example, method <code><a href="StampedLock.html#tryConvertToWriteLock(long)">tryConvertToWriteLock(long)</a></code> attempts to "upgrade" a mode, returning
 a valid write stamp if (1) already in writing mode (2) in reading
 mode and there are no other readers or (3) in optimistic mode and
 the lock is available. The forms of these methods are designed to
 help reduce some of the code bloat that otherwise occurs in
 retry-based designs.

 <p>StampedLocks are designed for use as internal utilities in the
 development of thread-safe components. Their use relies on
 knowledge of the internal properties of the data, objects, and
 methods they are protecting.  They are not reentrant, so locked
 bodies should not call other unknown methods that may try to
 re-acquire locks (although you may pass a stamp to other methods
 that can use or convert it).  The use of read lock modes relies on
 the associated code sections being side-effect-free.  Unvalidated
 optimistic read sections cannot call methods that are not known to
 tolerate potential inconsistencies.  Stamps use finite
 representations, and are not cryptographically secure (i.e., a
 valid stamp may be guessable). Stamp values may recycle after (no
 sooner than) one year of continuous operation. A stamp held without
 use or validation for longer than this period may fail to validate
 correctly.  StampedLocks are serializable, but always deserialize
 into initial unlocked state, so they are not useful for remote
 locking.

 <p>The scheduling policy of StampedLock does not consistently
 prefer readers over writers or vice versa.  All "try" methods are
 best-effort and do not necessarily conform to any scheduling or
 fairness policy. A zero return from any "try" method for acquiring
 or converting locks does not carry any information about the state
 of the lock; a subsequent invocation may succeed.

 <p>Because it supports coordinated usage across multiple lock
 modes, this class does not directly implement the <code><a href="Lock.html">Lock</a></code> or
 <code><a href="ReadWriteLock.html">ReadWriteLock</a></code> interfaces. However, a StampedLock may be
 viewed <code><a href="StampedLock.html#asReadLock()">asReadLock()</a></code>, <code><a href="StampedLock.html#asWriteLock()">asWriteLock()</a></code>, or <code><a href="StampedLock.html#asReadWriteLock()">asReadWriteLock()</a></code> in applications requiring only the associated
 set of functionality.

 <p><b>Sample Usage.</b> The following illustrates some usage idioms
 in a class that maintains simple two-dimensional points. The sample
 code illustrates some try/catch conventions even though they are
 not strictly needed here because no exceptions can occur in their
 bodies.<br>

 <pre> <code>class Point {
   private double x, y;
   private final StampedLock sl = new StampedLock();

   void move(double deltaX, double deltaY) { // an exclusively locked method
     long stamp = sl.writeLock();
     try {
       x += deltaX;
       y += deltaY;
     } finally {
       sl.unlockWrite(stamp);
     }
   }

   double distanceFromOrigin() { // A read-only method
     long stamp = sl.tryOptimisticRead();
     double currentX = x, currentY = y;
     if (!sl.validate(stamp)) {
        stamp = sl.readLock();
        try {
          currentX = x;
          currentY = y;
        } finally {
           sl.unlockRead(stamp);
        }
     }
     return Math.sqrt(currentX * currentX + currentY * currentY);
   }

   void moveIfAtOrigin(double newX, double newY) { // upgrade
     // Could instead start with optimistic, not read mode
     long stamp = sl.readLock();
     try {
       while (x == 0.0 &amp;&amp; y == 0.0) {
         long ws = sl.tryConvertToWriteLock(stamp);
         if (ws != 0L) {
           stamp = ws;
           x = newX;
           y = newY;
           break;
         }
         else {
           sl.unlockRead(stamp);
           stamp = sl.writeLock();
         }
       }
     } finally {
       sl.unlock(stamp);
     }
   }
 }</code></pre></p>







<h2 class="api-section">Summary</h2>























<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<table id="pubctors" class="responsive constructors">
<tr><th colspan="2"><h3>Public constructors</h3></th></tr>



  
  <tr class="api apilevel-24" >
  
  
    <td width="100%">
      <code>
      <a href="StampedLock.html#StampedLock()">StampedLock</a>()
      </code>
      
        <p>Creates a new lock, initially in unlocked state.
        
    
</p>
      
    </td>
  </tr>
  


</table>






<!-- ========== METHOD SUMMARY =========== -->
<table id="pubmethods" class="responsive methods">
<tr><th colspan="2"><h3>Public methods</h3></th></tr>



  
  <tr class="api apilevel-24" >
  
  
    <td><code>
        
        
        
        
        
        <a href="Lock.html">Lock</a></code>
    </td>
  
    <td width="100%">
      <code>
      <a href="StampedLock.html#asReadLock()">asReadLock</a>()
      </code>
      
        <p>Returns a plain <code><a href="Lock.html">Lock</a></code> view of this StampedLock in which
 the <code><a href="Lock.html#lock()">lock()</a></code> method is mapped to <code><a href="StampedLock.html#readLock()">readLock()</a></code>,
 and similarly for other methods.
        
    
</p>
      
    </td>
  </tr>
  

  
  <tr class="api apilevel-24" >
  
  
    <td><code>
        
        
        
        
        
        <a href="ReadWriteLock.html">ReadWriteLock</a></code>
    </td>
  
    <td width="100%">
      <code>
      <a href="StampedLock.html#asReadWriteLock()">asReadWriteLock</a>()
      </code>
      
        <p>Returns a <code><a href="ReadWriteLock.html">ReadWriteLock</a></code> view of this StampedLock in
 which the <code><a href="ReadWriteLock.html#readLock()">readLock()</a></code> method is mapped to
 <code><a href="StampedLock.html#asReadLock()">asReadLock()</a></code>, and <code><a href="ReadWriteLock.html#writeLock()">writeLock()</a></code> to
 <code><a href="StampedLock.html#asWriteLock()">asWriteLock()</a></code>.
        
    
</p>
      
    </td>
  </tr>
  

  
  <tr class="api apilevel-24" >
  
  
    <td><code>
        
        
        
        
        
        <a href="Lock.html">Lock</a></code>
    </td>
  
    <td width="100%">
      <code>
      <a href="StampedLock.html#asWriteLock()">asWriteLock</a>()
      </code>
      
        <p>Returns a plain <code><a href="Lock.html">Lock</a></code> view of this StampedLock in which
 the <code><a href="Lock.html#lock()">lock()</a></code> method is mapped to <code><a href="StampedLock.html#writeLock()">writeLock()</a></code>,
 and similarly for other methods.
        
    
</p>
      
    </td>
  </tr>
  

  
  <tr class="api apilevel-24" >
  
  
    <td><code>
        
        
        
        
        
        int</code>
    </td>
  
    <td width="100%">
      <code>
      <a href="StampedLock.html#getReadLockCount()">getReadLockCount</a>()
      </code>
      
        <p>Queries the number of read locks held for this lock.
        
    
</p>
      
    </td>
  </tr>
  

  
  <tr class="api apilevel-24" >
  
  
    <td><code>
        
        
        
        
        
        boolean</code>
    </td>
  
    <td width="100%">
      <code>
      <a href="StampedLock.html#isReadLocked()">isReadLocked</a>()
      </code>
      
        <p>Returns <code>true</code> if the lock is currently held non-exclusively.
        
    
</p>
      
    </td>
  </tr>
  

  
  <tr class="api apilevel-24" >
  
  
    <td><code>
        
        
        
        
        
        boolean</code>
    </td>
  
    <td width="100%">
      <code>
      <a href="StampedLock.html#isWriteLocked()">isWriteLocked</a>()
      </code>
      
        <p>Returns <code>true</code> if the lock is currently held exclusively.
        
    
</p>
      
    </td>
  </tr>
  

  
  <tr class="api apilevel-24" >
  
  
    <td><code>
        
        
        
        
        
        long</code>
    </td>
  
    <td width="100%">
      <code>
      <a href="StampedLock.html#readLock()">readLock</a>()
      </code>
      
        <p>Non-exclusively acquires the lock, blocking if necessary
 until available.
        
    
</p>
      
    </td>
  </tr>
  

  
  <tr class="api apilevel-24" >
  
  
    <td><code>
        
        
        
        
        
        long</code>
    </td>
  
    <td width="100%">
      <code>
      <a href="StampedLock.html#readLockInterruptibly()">readLockInterruptibly</a>()
      </code>
      
        <p>Non-exclusively acquires the lock, blocking if necessary
 until available or the current thread is interrupted.
        
    
</p>
      
    </td>
  </tr>
  

  
  <tr class="api apilevel-24" >
  
  
    <td><code>
        
        
        
        
        
        <a href="../../../lang/String.html">String</a></code>
    </td>
  
    <td width="100%">
      <code>
      <a href="StampedLock.html#toString()">toString</a>()
      </code>
      
        <p>Returns a string identifying this lock, as well as its lock
 state.
        
    
</p>
      
    </td>
  </tr>
  

  
  <tr class="api apilevel-24" >
  
  
    <td><code>
        
        
        
        
        
        long</code>
    </td>
  
    <td width="100%">
      <code>
      <a href="StampedLock.html#tryConvertToOptimisticRead(long)">tryConvertToOptimisticRead</a>(long stamp)
      </code>
      
        <p>If the lock state matches the given stamp then, atomically, if the stamp
 represents holding a lock, releases it and returns an
 observation stamp.
        
    
</p>
      
    </td>
  </tr>
  

  
  <tr class="api apilevel-24" >
  
  
    <td><code>
        
        
        
        
        
        long</code>
    </td>
  
    <td width="100%">
      <code>
      <a href="StampedLock.html#tryConvertToReadLock(long)">tryConvertToReadLock</a>(long stamp)
      </code>
      
        <p>If the lock state matches the given stamp, atomically performs one of
 the following actions.
        
    
</p>
      
    </td>
  </tr>
  

  
  <tr class="api apilevel-24" >
  
  
    <td><code>
        
        
        
        
        
        long</code>
    </td>
  
    <td width="100%">
      <code>
      <a href="StampedLock.html#tryConvertToWriteLock(long)">tryConvertToWriteLock</a>(long stamp)
      </code>
      
        <p>If the lock state matches the given stamp, atomically performs one of
 the following actions.
        
    
</p>
      
    </td>
  </tr>
  

  
  <tr class="api apilevel-24" >
  
  
    <td><code>
        
        
        
        
        
        long</code>
    </td>
  
    <td width="100%">
      <code>
      <a href="StampedLock.html#tryOptimisticRead()">tryOptimisticRead</a>()
      </code>
      
        <p>Returns a stamp that can later be validated, or zero
 if exclusively locked.
        
    
</p>
      
    </td>
  </tr>
  

  
  <tr class="api apilevel-24" >
  
  
    <td><code>
        
        
        
        
        
        long</code>
    </td>
  
    <td width="100%">
      <code>
      <a href="StampedLock.html#tryReadLock()">tryReadLock</a>()
      </code>
      
        <p>Non-exclusively acquires the lock if it is immediately available.
        
    
</p>
      
    </td>
  </tr>
  

  
  <tr class="api apilevel-24" >
  
  
    <td><code>
        
        
        
        
        
        long</code>
    </td>
  
    <td width="100%">
      <code>
      <a href="StampedLock.html#tryReadLock(long, java.util.concurrent.TimeUnit)">tryReadLock</a>(long time, <a href="../TimeUnit.html">TimeUnit</a> unit)
      </code>
      
        <p>Non-exclusively acquires the lock if it is available within the
 given time and the current thread has not been interrupted.
        
    
</p>
      
    </td>
  </tr>
  

  
  <tr class="api apilevel-24" >
  
  
    <td><code>
        
        
        
        
        
        boolean</code>
    </td>
  
    <td width="100%">
      <code>
      <a href="StampedLock.html#tryUnlockRead()">tryUnlockRead</a>()
      </code>
      
        <p>Releases one hold of the read lock if it is held, without
 requiring a stamp value.
        
    
</p>
      
    </td>
  </tr>
  

  
  <tr class="api apilevel-24" >
  
  
    <td><code>
        
        
        
        
        
        boolean</code>
    </td>
  
    <td width="100%">
      <code>
      <a href="StampedLock.html#tryUnlockWrite()">tryUnlockWrite</a>()
      </code>
      
        <p>Releases the write lock if it is held, without requiring a
 stamp value.
        
    
</p>
      
    </td>
  </tr>
  

  
  <tr class="api apilevel-24" >
  
  
    <td><code>
        
        
        
        
        
        long</code>
    </td>
  
    <td width="100%">
      <code>
      <a href="StampedLock.html#tryWriteLock()">tryWriteLock</a>()
      </code>
      
        <p>Exclusively acquires the lock if it is immediately available.
        
    
</p>
      
    </td>
  </tr>
  

  
  <tr class="api apilevel-24" >
  
  
    <td><code>
        
        
        
        
        
        long</code>
    </td>
  
    <td width="100%">
      <code>
      <a href="StampedLock.html#tryWriteLock(long, java.util.concurrent.TimeUnit)">tryWriteLock</a>(long time, <a href="../TimeUnit.html">TimeUnit</a> unit)
      </code>
      
        <p>Exclusively acquires the lock if it is available within the
 given time and the current thread has not been interrupted.
        
    
</p>
      
    </td>
  </tr>
  

  
  <tr class="api apilevel-24" >
  
  
    <td><code>
        
        
        
        
        
        void</code>
    </td>
  
    <td width="100%">
      <code>
      <a href="StampedLock.html#unlock(long)">unlock</a>(long stamp)
      </code>
      
        <p>If the lock state matches the given stamp, releases the
 corresponding mode of the lock.
        
    
</p>
      
    </td>
  </tr>
  

  
  <tr class="api apilevel-24" >
  
  
    <td><code>
        
        
        
        
        
        void</code>
    </td>
  
    <td width="100%">
      <code>
      <a href="StampedLock.html#unlockRead(long)">unlockRead</a>(long stamp)
      </code>
      
        <p>If the lock state matches the given stamp, releases the
 non-exclusive lock.
        
    
</p>
      
    </td>
  </tr>
  

  
  <tr class="api apilevel-24" >
  
  
    <td><code>
        
        
        
        
        
        void</code>
    </td>
  
    <td width="100%">
      <code>
      <a href="StampedLock.html#unlockWrite(long)">unlockWrite</a>(long stamp)
      </code>
      
        <p>If the lock state matches the given stamp, releases the
 exclusive lock.
        
    
</p>
      
    </td>
  </tr>
  

  
  <tr class="api apilevel-24" >
  
  
    <td><code>
        
        
        
        
        
        boolean</code>
    </td>
  
    <td width="100%">
      <code>
      <a href="StampedLock.html#validate(long)">validate</a>(long stamp)
      </code>
      
        <p>Returns true if the lock has not been exclusively acquired
 since issuance of the given stamp.
        
    
</p>
      
    </td>
  </tr>
  

  
  <tr class="api apilevel-24" >
  
  
    <td><code>
        
        
        
        
        
        long</code>
    </td>
  
    <td width="100%">
      <code>
      <a href="StampedLock.html#writeLock()">writeLock</a>()
      </code>
      
        <p>Exclusively acquires the lock, blocking if necessary
 until available.
        
    
</p>
      
    </td>
  </tr>
  

  
  <tr class="api apilevel-24" >
  
  
    <td><code>
        
        
        
        
        
        long</code>
    </td>
  
    <td width="100%">
      <code>
      <a href="StampedLock.html#writeLockInterruptibly()">writeLockInterruptibly</a>()
      </code>
      
        <p>Exclusively acquires the lock, blocking if necessary
 until available or the current thread is interrupted.
        
    
</p>
      
    </td>
  </tr>
  


</table>







<!-- ========== METHOD SUMMARY =========== -->
<table id="inhmethods" class="methods inhtable">
<tr><th><h3>Inherited methods</h3></th></tr>


<tr class="api apilevel-" >
<td colspan="2">

  <a href="#" onclick="return toggleInherited(this, null)" id="inherited-methods-java.lang.Object" class="jd-expando-trigger closed"
          ><img height="34" id="inherited-methods-java.lang.Object-trigger"
          src="https://developer.android.com/assets/images/styles/disclosure_down.png"
          class="jd-expando-trigger-img" /></a>From
class
<code>
  
    <a href="../../../lang/Object.html">java.lang.Object</a>
  
</code>
<div id="inherited-methods-java.lang.Object">
  <div id="inherited-methods-java.lang.Object-list"
        class="jd-inheritedlinks">
  </div>
  <div id="inherited-methods-java.lang.Object-summary" style="display: none;">
    <table class="jd-sumtable-expando responsive">
      


  
  <tr class="api apilevel-1" >
  
  
    <td><code>
        
        
        
        
        
        <a href="../../../lang/Object.html">Object</a></code>
    </td>
  
    <td width="100%">
      <code>
      <a href="../../../lang/Object.html#clone()">clone</a>()
      </code>
      
        <p>Creates and returns a copy of this object.
        
    
</p>
      
    </td>
  </tr>
  

  
  <tr class="api apilevel-1" >
  
  
    <td><code>
        
        
        
        
        
        boolean</code>
    </td>
  
    <td width="100%">
      <code>
      <a href="../../../lang/Object.html#equals(java.lang.Object)">equals</a>(<a href="../../../lang/Object.html">Object</a> obj)
      </code>
      
        <p>Indicates whether some other object is "equal to" this one.
        
    
</p>
      
    </td>
  </tr>
  

  
  <tr class="api apilevel-1" >
  
  
    <td><code>
        
        
        
        
        
        void</code>
    </td>
  
    <td width="100%">
      <code>
      <a href="../../../lang/Object.html#finalize()">finalize</a>()
      </code>
      
        <p>Called by the garbage collector on an object when garbage collection
 determines that there are no more references to the object.
        
    
</p>
      
    </td>
  </tr>
  

  
  <tr class="api apilevel-1" >
  
  
    <td><code>
        
        
        
        final
        
        <a href="../../../lang/Class.html">Class</a>&lt;?&gt;</code>
    </td>
  
    <td width="100%">
      <code>
      <a href="../../../lang/Object.html#getClass()">getClass</a>()
      </code>
      
        <p>Returns the runtime class of this <code>Object</code>.
        
    
</p>
      
    </td>
  </tr>
  

  
  <tr class="api apilevel-1" >
  
  
    <td><code>
        
        
        
        
        
        int</code>
    </td>
  
    <td width="100%">
      <code>
      <a href="../../../lang/Object.html#hashCode()">hashCode</a>()
      </code>
      
        <p>Returns a hash code value for the object.
        
    
</p>
      
    </td>
  </tr>
  

  
  <tr class="api apilevel-1" >
  
  
    <td><code>
        
        
        
        final
        
        void</code>
    </td>
  
    <td width="100%">
      <code>
      <a href="../../../lang/Object.html#notify()">notify</a>()
      </code>
      
        <p>Wakes up a single thread that is waiting on this object's
 monitor.
        
    
</p>
      
    </td>
  </tr>
  

  
  <tr class="api apilevel-1" >
  
  
    <td><code>
        
        
        
        final
        
        void</code>
    </td>
  
    <td width="100%">
      <code>
      <a href="../../../lang/Object.html#notifyAll()">notifyAll</a>()
      </code>
      
        <p>Wakes up all threads that are waiting on this object's monitor.
        
    
</p>
      
    </td>
  </tr>
  

  
  <tr class="api apilevel-1" >
  
  
    <td><code>
        
        
        
        
        
        <a href="../../../lang/String.html">String</a></code>
    </td>
  
    <td width="100%">
      <code>
      <a href="../../../lang/Object.html#toString()">toString</a>()
      </code>
      
        <p>Returns a string representation of the object.
        
    
</p>
      
    </td>
  </tr>
  

  
  <tr class="api apilevel-1" >
  
  
    <td><code>
        
        
        
        final
        
        void</code>
    </td>
  
    <td width="100%">
      <code>
      <a href="../../../lang/Object.html#wait(long, int)">wait</a>(long millis, int nanos)
      </code>
      
        <p>Causes the current thread to wait until another thread invokes the
 <code><a href="../../../lang/Object.html#notify()">notify()</a></code> method or the
 <code><a href="../../../lang/Object.html#notifyAll()">notifyAll()</a></code> method for this object, or
 some other thread interrupts the current thread, or a certain
 amount of real time has elapsed.
        
    
</p>
      
    </td>
  </tr>
  

  
  <tr class="api apilevel-1" >
  
  
    <td><code>
        
        
        
        final
        
        void</code>
    </td>
  
    <td width="100%">
      <code>
      <a href="../../../lang/Object.html#wait(long)">wait</a>(long millis)
      </code>
      
        <p>Causes the current thread to wait until either another thread invokes the
 <code><a href="../../../lang/Object.html#notify()">notify()</a></code> method or the
 <code><a href="../../../lang/Object.html#notifyAll()">notifyAll()</a></code> method for this object, or a
 specified amount of time has elapsed.
        
    
</p>
      
    </td>
  </tr>
  

  
  <tr class="api apilevel-1" >
  
  
    <td><code>
        
        
        
        final
        
        void</code>
    </td>
  
    <td width="100%">
      <code>
      <a href="../../../lang/Object.html#wait()">wait</a>()
      </code>
      
        <p>Causes the current thread to wait until another thread invokes the
 <code><a href="../../../lang/Object.html#notify()">notify()</a></code> method or the
 <code><a href="../../../lang/Object.html#notifyAll()">notifyAll()</a></code> method for this object.
        
    
</p>
      
    </td>
  </tr>
  


    </table>
  </div>
</div>
</td></tr>




</table>



<!-- XML Attributes -->


<!-- Enum Values -->


<!-- Constants -->


<!-- Fields -->


<!-- Public ctors -->


<!-- ========= CONSTRUCTOR DETAIL ======== -->
<h2 class="api-section">Public constructors</h2>



<A NAME="StampedLock()"></A>

<div class="api apilevel-24">
    <h3 class="api-name">StampedLock</h3>
    <div class="api-level">
      <div>
  Added in <a href="https://developer.android.com/guide/topics/manifest/uses-sdk-element.html#ApiLevels">API level 24</a></div>
      
  

    </div>
<pre class="api-signature no-pretty-print">
StampedLock ()</pre>
    
    

    
  <p>Creates a new lock, initially in unlocked state.
</p>

</div>





<!-- ========= CONSTRUCTOR DETAIL ======== -->
<!-- Protected ctors -->



<!-- ========= METHOD DETAIL ======== -->
<!-- Public methdos -->

<h2 class="api-section">Public methods</h2>



<A NAME="asReadLock()"></A>

<div class="api apilevel-24">
    <h3 class="api-name">asReadLock</h3>
    <div class="api-level">
      <div>
  Added in <a href="https://developer.android.com/guide/topics/manifest/uses-sdk-element.html#ApiLevels">API level 24</a></div>
      
  

    </div>
<pre class="api-signature no-pretty-print">
<a href="Lock.html">Lock</a> asReadLock ()</pre>
    
    

    
  <p>Returns a plain <code><a href="Lock.html">Lock</a></code> view of this StampedLock in which
 the <code><a href="Lock.html#lock()">lock()</a></code> method is mapped to <code><a href="StampedLock.html#readLock()">readLock()</a></code>,
 and similarly for other methods. The returned Lock does not
 support a <code><a href="Condition.html">Condition</a></code>; method <code><a href="Lock.html#newCondition()">newCondition()</a></code> throws <code>UnsupportedOperationException</code>.</p>
    <table class="responsive">
      <tr><th colspan=2>Returns</th></tr>
      <tr>
        <td><code><a href="Lock.html">Lock</a></code></td>
        <td width="100%">the lock
</td>
      </tr>
    </table>

</div>


<A NAME="asReadWriteLock()"></A>

<div class="api apilevel-24">
    <h3 class="api-name">asReadWriteLock</h3>
    <div class="api-level">
      <div>
  Added in <a href="https://developer.android.com/guide/topics/manifest/uses-sdk-element.html#ApiLevels">API level 24</a></div>
      
  

    </div>
<pre class="api-signature no-pretty-print">
<a href="ReadWriteLock.html">ReadWriteLock</a> asReadWriteLock ()</pre>
    
    

    
  <p>Returns a <code><a href="ReadWriteLock.html">ReadWriteLock</a></code> view of this StampedLock in
 which the <code><a href="ReadWriteLock.html#readLock()">readLock()</a></code> method is mapped to
 <code><a href="StampedLock.html#asReadLock()">asReadLock()</a></code>, and <code><a href="ReadWriteLock.html#writeLock()">writeLock()</a></code> to
 <code><a href="StampedLock.html#asWriteLock()">asWriteLock()</a></code>.</p>
    <table class="responsive">
      <tr><th colspan=2>Returns</th></tr>
      <tr>
        <td><code><a href="ReadWriteLock.html">ReadWriteLock</a></code></td>
        <td width="100%">the lock
</td>
      </tr>
    </table>

</div>


<A NAME="asWriteLock()"></A>

<div class="api apilevel-24">
    <h3 class="api-name">asWriteLock</h3>
    <div class="api-level">
      <div>
  Added in <a href="https://developer.android.com/guide/topics/manifest/uses-sdk-element.html#ApiLevels">API level 24</a></div>
      
  

    </div>
<pre class="api-signature no-pretty-print">
<a href="Lock.html">Lock</a> asWriteLock ()</pre>
    
    

    
  <p>Returns a plain <code><a href="Lock.html">Lock</a></code> view of this StampedLock in which
 the <code><a href="Lock.html#lock()">lock()</a></code> method is mapped to <code><a href="StampedLock.html#writeLock()">writeLock()</a></code>,
 and similarly for other methods. The returned Lock does not
 support a <code><a href="Condition.html">Condition</a></code>; method <code><a href="Lock.html#newCondition()">newCondition()</a></code> throws <code>UnsupportedOperationException</code>.</p>
    <table class="responsive">
      <tr><th colspan=2>Returns</th></tr>
      <tr>
        <td><code><a href="Lock.html">Lock</a></code></td>
        <td width="100%">the lock
</td>
      </tr>
    </table>

</div>


<A NAME="getReadLockCount()"></A>

<div class="api apilevel-24">
    <h3 class="api-name">getReadLockCount</h3>
    <div class="api-level">
      <div>
  Added in <a href="https://developer.android.com/guide/topics/manifest/uses-sdk-element.html#ApiLevels">API level 24</a></div>
      
  

    </div>
<pre class="api-signature no-pretty-print">
int getReadLockCount ()</pre>
    
    

    
  <p>Queries the number of read locks held for this lock. This
 method is designed for use in monitoring system state, not for
 synchronization control.</p>
    <table class="responsive">
      <tr><th colspan=2>Returns</th></tr>
      <tr>
        <td><code>int</code></td>
        <td width="100%">the number of read locks held
</td>
      </tr>
    </table>

</div>


<A NAME="isReadLocked()"></A>

<div class="api apilevel-24">
    <h3 class="api-name">isReadLocked</h3>
    <div class="api-level">
      <div>
  Added in <a href="https://developer.android.com/guide/topics/manifest/uses-sdk-element.html#ApiLevels">API level 24</a></div>
      
  

    </div>
<pre class="api-signature no-pretty-print">
boolean isReadLocked ()</pre>
    
    

    
  <p>Returns <code>true</code> if the lock is currently held non-exclusively.</p>
    <table class="responsive">
      <tr><th colspan=2>Returns</th></tr>
      <tr>
        <td><code>boolean</code></td>
        <td width="100%"><code>true</code> if the lock is currently held non-exclusively
</td>
      </tr>
    </table>

</div>


<A NAME="isWriteLocked()"></A>

<div class="api apilevel-24">
    <h3 class="api-name">isWriteLocked</h3>
    <div class="api-level">
      <div>
  Added in <a href="https://developer.android.com/guide/topics/manifest/uses-sdk-element.html#ApiLevels">API level 24</a></div>
      
  

    </div>
<pre class="api-signature no-pretty-print">
boolean isWriteLocked ()</pre>
    
    

    
  <p>Returns <code>true</code> if the lock is currently held exclusively.</p>
    <table class="responsive">
      <tr><th colspan=2>Returns</th></tr>
      <tr>
        <td><code>boolean</code></td>
        <td width="100%"><code>true</code> if the lock is currently held exclusively
</td>
      </tr>
    </table>

</div>


<A NAME="readLock()"></A>

<div class="api apilevel-24">
    <h3 class="api-name">readLock</h3>
    <div class="api-level">
      <div>
  Added in <a href="https://developer.android.com/guide/topics/manifest/uses-sdk-element.html#ApiLevels">API level 24</a></div>
      
  

    </div>
<pre class="api-signature no-pretty-print">
long readLock ()</pre>
    
    

    
  <p>Non-exclusively acquires the lock, blocking if necessary
 until available.</p>
    <table class="responsive">
      <tr><th colspan=2>Returns</th></tr>
      <tr>
        <td><code>long</code></td>
        <td width="100%">a stamp that can be used to unlock or convert mode
</td>
      </tr>
    </table>

</div>


<A NAME="readLockInterruptibly()"></A>

<div class="api apilevel-24">
    <h3 class="api-name">readLockInterruptibly</h3>
    <div class="api-level">
      <div>
  Added in <a href="https://developer.android.com/guide/topics/manifest/uses-sdk-element.html#ApiLevels">API level 24</a></div>
      
  

    </div>
<pre class="api-signature no-pretty-print">
long readLockInterruptibly ()</pre>
    
    

    
  <p>Non-exclusively acquires the lock, blocking if necessary
 until available or the current thread is interrupted.
 Behavior under interruption matches that specified
 for method <code><a href="Lock.html#lockInterruptibly()">lockInterruptibly()</a></code>.</p>
    <table class="responsive">
      <tr><th colspan=2>Returns</th></tr>
      <tr>
        <td><code>long</code></td>
        <td width="100%">a stamp that can be used to unlock or convert mode</td>
      </tr>
    </table>
      <table class="responsive">
      <tr><th colspan=2>Throws</th></tr>
        <tr>
          <td><code><a href="../../../lang/InterruptedException.html">InterruptedException</a></code></td>
          <td width="100%">if the current thread is interrupted
 before acquiring the lock
</td>
        </tr>
      </table>
  

</div>


<A NAME="toString()"></A>

<div class="api apilevel-24">
    <h3 class="api-name">toString</h3>
    <div class="api-level">
      <div>
  Added in <a href="https://developer.android.com/guide/topics/manifest/uses-sdk-element.html#ApiLevels">API level 24</a></div>
      
  

    </div>
<pre class="api-signature no-pretty-print">
<a href="../../../lang/String.html">String</a> toString ()</pre>
    
    

    
  <p>Returns a string identifying this lock, as well as its lock
 state.  The state, in brackets, includes the String <code>"Unlocked"</code> or the String <code>"Write-locked"</code> or the String
 <code>"Read-locks:"</code> followed by the current number of
 read-locks held.</p>
    <table class="responsive">
      <tr><th colspan=2>Returns</th></tr>
      <tr>
        <td><code><a href="../../../lang/String.html">String</a></code></td>
        <td width="100%">a string identifying this lock, as well as its lock state
</td>
      </tr>
    </table>

</div>


<A NAME="tryConvertToOptimisticRead(long)"></A>

<div class="api apilevel-24">
    <h3 class="api-name">tryConvertToOptimisticRead</h3>
    <div class="api-level">
      <div>
  Added in <a href="https://developer.android.com/guide/topics/manifest/uses-sdk-element.html#ApiLevels">API level 24</a></div>
      
  

    </div>
<pre class="api-signature no-pretty-print">
long tryConvertToOptimisticRead (long stamp)</pre>
    
    

    
  <p>If the lock state matches the given stamp then, atomically, if the stamp
 represents holding a lock, releases it and returns an
 observation stamp.  Or, if an optimistic read, returns it if
 validated. This method returns zero in all other cases, and so
 may be useful as a form of "tryUnlock".</p>
    <table class="responsive">
    <tr><th colspan=2>Parameters</th></tr>
      <tr>
        <td><code>stamp</code></td>
        <td width="100%">
          <code>long</code>:
          a stamp</td>
      </tr>
    </table>
    <table class="responsive">
      <tr><th colspan=2>Returns</th></tr>
      <tr>
        <td><code>long</code></td>
        <td width="100%">a valid optimistic read stamp, or zero on failure
</td>
      </tr>
    </table>

</div>


<A NAME="tryConvertToReadLock(long)"></A>

<div class="api apilevel-24">
    <h3 class="api-name">tryConvertToReadLock</h3>
    <div class="api-level">
      <div>
  Added in <a href="https://developer.android.com/guide/topics/manifest/uses-sdk-element.html#ApiLevels">API level 24</a></div>
      
  

    </div>
<pre class="api-signature no-pretty-print">
long tryConvertToReadLock (long stamp)</pre>
    
    

    
  <p>If the lock state matches the given stamp, atomically performs one of
 the following actions. If the stamp represents holding a write
 lock, releases it and obtains a read lock.  Or, if a read lock,
 returns it. Or, if an optimistic read, acquires a read lock and
 returns a read stamp only if immediately available. This method
 returns zero in all other cases.</p>
    <table class="responsive">
    <tr><th colspan=2>Parameters</th></tr>
      <tr>
        <td><code>stamp</code></td>
        <td width="100%">
          <code>long</code>:
          a stamp</td>
      </tr>
    </table>
    <table class="responsive">
      <tr><th colspan=2>Returns</th></tr>
      <tr>
        <td><code>long</code></td>
        <td width="100%">a valid read stamp, or zero on failure
</td>
      </tr>
    </table>

</div>


<A NAME="tryConvertToWriteLock(long)"></A>

<div class="api apilevel-24">
    <h3 class="api-name">tryConvertToWriteLock</h3>
    <div class="api-level">
      <div>
  Added in <a href="https://developer.android.com/guide/topics/manifest/uses-sdk-element.html#ApiLevels">API level 24</a></div>
      
  

    </div>
<pre class="api-signature no-pretty-print">
long tryConvertToWriteLock (long stamp)</pre>
    
    

    
  <p>If the lock state matches the given stamp, atomically performs one of
 the following actions. If the stamp represents holding a write
 lock, returns it.  Or, if a read lock, if the write lock is
 available, releases the read lock and returns a write stamp.
 Or, if an optimistic read, returns a write stamp only if
 immediately available. This method returns zero in all other
 cases.</p>
    <table class="responsive">
    <tr><th colspan=2>Parameters</th></tr>
      <tr>
        <td><code>stamp</code></td>
        <td width="100%">
          <code>long</code>:
          a stamp</td>
      </tr>
    </table>
    <table class="responsive">
      <tr><th colspan=2>Returns</th></tr>
      <tr>
        <td><code>long</code></td>
        <td width="100%">a valid write stamp, or zero on failure
</td>
      </tr>
    </table>

</div>


<A NAME="tryOptimisticRead()"></A>

<div class="api apilevel-24">
    <h3 class="api-name">tryOptimisticRead</h3>
    <div class="api-level">
      <div>
  Added in <a href="https://developer.android.com/guide/topics/manifest/uses-sdk-element.html#ApiLevels">API level 24</a></div>
      
  

    </div>
<pre class="api-signature no-pretty-print">
long tryOptimisticRead ()</pre>
    
    

    
  <p>Returns a stamp that can later be validated, or zero
 if exclusively locked.</p>
    <table class="responsive">
      <tr><th colspan=2>Returns</th></tr>
      <tr>
        <td><code>long</code></td>
        <td width="100%">a stamp, or zero if exclusively locked
</td>
      </tr>
    </table>

</div>


<A NAME="tryReadLock()"></A>

<div class="api apilevel-24">
    <h3 class="api-name">tryReadLock</h3>
    <div class="api-level">
      <div>
  Added in <a href="https://developer.android.com/guide/topics/manifest/uses-sdk-element.html#ApiLevels">API level 24</a></div>
      
  

    </div>
<pre class="api-signature no-pretty-print">
long tryReadLock ()</pre>
    
    

    
  <p>Non-exclusively acquires the lock if it is immediately available.</p>
    <table class="responsive">
      <tr><th colspan=2>Returns</th></tr>
      <tr>
        <td><code>long</code></td>
        <td width="100%">a stamp that can be used to unlock or convert mode,
 or zero if the lock is not available
</td>
      </tr>
    </table>

</div>


<A NAME="tryReadLock(long, java.util.concurrent.TimeUnit)"></A>

<div class="api apilevel-24">
    <h3 class="api-name">tryReadLock</h3>
    <div class="api-level">
      <div>
  Added in <a href="https://developer.android.com/guide/topics/manifest/uses-sdk-element.html#ApiLevels">API level 24</a></div>
      
  

    </div>
<pre class="api-signature no-pretty-print">
long tryReadLock (long time, 
                <a href="../TimeUnit.html">TimeUnit</a> unit)</pre>
    
    

    
  <p>Non-exclusively acquires the lock if it is available within the
 given time and the current thread has not been interrupted.
 Behavior under timeout and interruption matches that specified
 for method <code><a href="Lock.html#tryLock(long, java.util.concurrent.TimeUnit)">tryLock(long, TimeUnit)</a></code>.</p>
    <table class="responsive">
    <tr><th colspan=2>Parameters</th></tr>
      <tr>
        <td><code>time</code></td>
        <td width="100%">
          <code>long</code>:
          the maximum time to wait for the lock</td>
      </tr>
      <tr>
        <td><code>unit</code></td>
        <td width="100%">
          <code>TimeUnit</code>:
          the time unit of the <code>time</code> argument</td>
      </tr>
    </table>
    <table class="responsive">
      <tr><th colspan=2>Returns</th></tr>
      <tr>
        <td><code>long</code></td>
        <td width="100%">a stamp that can be used to unlock or convert mode,
 or zero if the lock is not available</td>
      </tr>
    </table>
      <table class="responsive">
      <tr><th colspan=2>Throws</th></tr>
        <tr>
          <td><code><a href="../../../lang/InterruptedException.html">InterruptedException</a></code></td>
          <td width="100%">if the current thread is interrupted
 before acquiring the lock
</td>
        </tr>
      </table>
  

</div>


<A NAME="tryUnlockRead()"></A>

<div class="api apilevel-24">
    <h3 class="api-name">tryUnlockRead</h3>
    <div class="api-level">
      <div>
  Added in <a href="https://developer.android.com/guide/topics/manifest/uses-sdk-element.html#ApiLevels">API level 24</a></div>
      
  

    </div>
<pre class="api-signature no-pretty-print">
boolean tryUnlockRead ()</pre>
    
    

    
  <p>Releases one hold of the read lock if it is held, without
 requiring a stamp value. This method may be useful for recovery
 after errors.</p>
    <table class="responsive">
      <tr><th colspan=2>Returns</th></tr>
      <tr>
        <td><code>boolean</code></td>
        <td width="100%"><code>true</code> if the read lock was held, else false
</td>
      </tr>
    </table>

</div>


<A NAME="tryUnlockWrite()"></A>

<div class="api apilevel-24">
    <h3 class="api-name">tryUnlockWrite</h3>
    <div class="api-level">
      <div>
  Added in <a href="https://developer.android.com/guide/topics/manifest/uses-sdk-element.html#ApiLevels">API level 24</a></div>
      
  

    </div>
<pre class="api-signature no-pretty-print">
boolean tryUnlockWrite ()</pre>
    
    

    
  <p>Releases the write lock if it is held, without requiring a
 stamp value. This method may be useful for recovery after
 errors.</p>
    <table class="responsive">
      <tr><th colspan=2>Returns</th></tr>
      <tr>
        <td><code>boolean</code></td>
        <td width="100%"><code>true</code> if the lock was held, else false
</td>
      </tr>
    </table>

</div>


<A NAME="tryWriteLock()"></A>

<div class="api apilevel-24">
    <h3 class="api-name">tryWriteLock</h3>
    <div class="api-level">
      <div>
  Added in <a href="https://developer.android.com/guide/topics/manifest/uses-sdk-element.html#ApiLevels">API level 24</a></div>
      
  

    </div>
<pre class="api-signature no-pretty-print">
long tryWriteLock ()</pre>
    
    

    
  <p>Exclusively acquires the lock if it is immediately available.</p>
    <table class="responsive">
      <tr><th colspan=2>Returns</th></tr>
      <tr>
        <td><code>long</code></td>
        <td width="100%">a stamp that can be used to unlock or convert mode,
 or zero if the lock is not available
</td>
      </tr>
    </table>

</div>


<A NAME="tryWriteLock(long, java.util.concurrent.TimeUnit)"></A>

<div class="api apilevel-24">
    <h3 class="api-name">tryWriteLock</h3>
    <div class="api-level">
      <div>
  Added in <a href="https://developer.android.com/guide/topics/manifest/uses-sdk-element.html#ApiLevels">API level 24</a></div>
      
  

    </div>
<pre class="api-signature no-pretty-print">
long tryWriteLock (long time, 
                <a href="../TimeUnit.html">TimeUnit</a> unit)</pre>
    
    

    
  <p>Exclusively acquires the lock if it is available within the
 given time and the current thread has not been interrupted.
 Behavior under timeout and interruption matches that specified
 for method <code><a href="Lock.html#tryLock(long, java.util.concurrent.TimeUnit)">tryLock(long, TimeUnit)</a></code>.</p>
    <table class="responsive">
    <tr><th colspan=2>Parameters</th></tr>
      <tr>
        <td><code>time</code></td>
        <td width="100%">
          <code>long</code>:
          the maximum time to wait for the lock</td>
      </tr>
      <tr>
        <td><code>unit</code></td>
        <td width="100%">
          <code>TimeUnit</code>:
          the time unit of the <code>time</code> argument</td>
      </tr>
    </table>
    <table class="responsive">
      <tr><th colspan=2>Returns</th></tr>
      <tr>
        <td><code>long</code></td>
        <td width="100%">a stamp that can be used to unlock or convert mode,
 or zero if the lock is not available</td>
      </tr>
    </table>
      <table class="responsive">
      <tr><th colspan=2>Throws</th></tr>
        <tr>
          <td><code><a href="../../../lang/InterruptedException.html">InterruptedException</a></code></td>
          <td width="100%">if the current thread is interrupted
 before acquiring the lock
</td>
        </tr>
      </table>
  

</div>


<A NAME="unlock(long)"></A>

<div class="api apilevel-24">
    <h3 class="api-name">unlock</h3>
    <div class="api-level">
      <div>
  Added in <a href="https://developer.android.com/guide/topics/manifest/uses-sdk-element.html#ApiLevels">API level 24</a></div>
      
  

    </div>
<pre class="api-signature no-pretty-print">
void unlock (long stamp)</pre>
    
    

    
  <p>If the lock state matches the given stamp, releases the
 corresponding mode of the lock.</p>
    <table class="responsive">
    <tr><th colspan=2>Parameters</th></tr>
      <tr>
        <td><code>stamp</code></td>
        <td width="100%">
          <code>long</code>:
          a stamp returned by a lock operation</td>
      </tr>
    </table>
      <table class="responsive">
      <tr><th colspan=2>Throws</th></tr>
        <tr>
          <td><code><a href="../../../lang/IllegalMonitorStateException.html">IllegalMonitorStateException</a></code></td>
          <td width="100%">if the stamp does
 not match the current state of this lock
</td>
        </tr>
      </table>
  

</div>


<A NAME="unlockRead(long)"></A>

<div class="api apilevel-24">
    <h3 class="api-name">unlockRead</h3>
    <div class="api-level">
      <div>
  Added in <a href="https://developer.android.com/guide/topics/manifest/uses-sdk-element.html#ApiLevels">API level 24</a></div>
      
  

    </div>
<pre class="api-signature no-pretty-print">
void unlockRead (long stamp)</pre>
    
    

    
  <p>If the lock state matches the given stamp, releases the
 non-exclusive lock.</p>
    <table class="responsive">
    <tr><th colspan=2>Parameters</th></tr>
      <tr>
        <td><code>stamp</code></td>
        <td width="100%">
          <code>long</code>:
          a stamp returned by a read-lock operation</td>
      </tr>
    </table>
      <table class="responsive">
      <tr><th colspan=2>Throws</th></tr>
        <tr>
          <td><code><a href="../../../lang/IllegalMonitorStateException.html">IllegalMonitorStateException</a></code></td>
          <td width="100%">if the stamp does
 not match the current state of this lock
</td>
        </tr>
      </table>
  

</div>


<A NAME="unlockWrite(long)"></A>

<div class="api apilevel-24">
    <h3 class="api-name">unlockWrite</h3>
    <div class="api-level">
      <div>
  Added in <a href="https://developer.android.com/guide/topics/manifest/uses-sdk-element.html#ApiLevels">API level 24</a></div>
      
  

    </div>
<pre class="api-signature no-pretty-print">
void unlockWrite (long stamp)</pre>
    
    

    
  <p>If the lock state matches the given stamp, releases the
 exclusive lock.</p>
    <table class="responsive">
    <tr><th colspan=2>Parameters</th></tr>
      <tr>
        <td><code>stamp</code></td>
        <td width="100%">
          <code>long</code>:
          a stamp returned by a write-lock operation</td>
      </tr>
    </table>
      <table class="responsive">
      <tr><th colspan=2>Throws</th></tr>
        <tr>
          <td><code><a href="../../../lang/IllegalMonitorStateException.html">IllegalMonitorStateException</a></code></td>
          <td width="100%">if the stamp does
 not match the current state of this lock
</td>
        </tr>
      </table>
  

</div>


<A NAME="validate(long)"></A>

<div class="api apilevel-24">
    <h3 class="api-name">validate</h3>
    <div class="api-level">
      <div>
  Added in <a href="https://developer.android.com/guide/topics/manifest/uses-sdk-element.html#ApiLevels">API level 24</a></div>
      
  

    </div>
<pre class="api-signature no-pretty-print">
boolean validate (long stamp)</pre>
    
    

    
  <p>Returns true if the lock has not been exclusively acquired
 since issuance of the given stamp. Always returns false if the
 stamp is zero. Always returns true if the stamp represents a
 currently held lock. Invoking this method with a value not
 obtained from <code><a href="StampedLock.html#tryOptimisticRead()">tryOptimisticRead()</a></code> or a locking method
 for this lock has no defined effect or result.</p>
    <table class="responsive">
    <tr><th colspan=2>Parameters</th></tr>
      <tr>
        <td><code>stamp</code></td>
        <td width="100%">
          <code>long</code>:
          a stamp</td>
      </tr>
    </table>
    <table class="responsive">
      <tr><th colspan=2>Returns</th></tr>
      <tr>
        <td><code>boolean</code></td>
        <td width="100%"><code>true</code> if the lock has not been exclusively acquired
 since issuance of the given stamp; else false
</td>
      </tr>
    </table>

</div>


<A NAME="writeLock()"></A>

<div class="api apilevel-24">
    <h3 class="api-name">writeLock</h3>
    <div class="api-level">
      <div>
  Added in <a href="https://developer.android.com/guide/topics/manifest/uses-sdk-element.html#ApiLevels">API level 24</a></div>
      
  

    </div>
<pre class="api-signature no-pretty-print">
long writeLock ()</pre>
    
    

    
  <p>Exclusively acquires the lock, blocking if necessary
 until available.</p>
    <table class="responsive">
      <tr><th colspan=2>Returns</th></tr>
      <tr>
        <td><code>long</code></td>
        <td width="100%">a stamp that can be used to unlock or convert mode
</td>
      </tr>
    </table>

</div>


<A NAME="writeLockInterruptibly()"></A>

<div class="api apilevel-24">
    <h3 class="api-name">writeLockInterruptibly</h3>
    <div class="api-level">
      <div>
  Added in <a href="https://developer.android.com/guide/topics/manifest/uses-sdk-element.html#ApiLevels">API level 24</a></div>
      
  

    </div>
<pre class="api-signature no-pretty-print">
long writeLockInterruptibly ()</pre>
    
    

    
  <p>Exclusively acquires the lock, blocking if necessary
 until available or the current thread is interrupted.
 Behavior under interruption matches that specified
 for method <code><a href="Lock.html#lockInterruptibly()">lockInterruptibly()</a></code>.</p>
    <table class="responsive">
      <tr><th colspan=2>Returns</th></tr>
      <tr>
        <td><code>long</code></td>
        <td width="100%">a stamp that can be used to unlock or convert mode</td>
      </tr>
    </table>
      <table class="responsive">
      <tr><th colspan=2>Throws</th></tr>
        <tr>
          <td><code><a href="../../../lang/InterruptedException.html">InterruptedException</a></code></td>
          <td width="100%">if the current thread is interrupted
 before acquiring the lock
</td>
        </tr>
      </table>
  

</div>





<!-- ========= METHOD DETAIL ======== -->



<!-- ========= END OF CLASS DATA ========= -->

</div><!-- end jd-content -->



<div class="data-reference-resources-wrapper">
  
  <ul data-reference-resources>
    
    
    <li><h2>Interfaces</h2>
      <ul>
          <li class="api apilevel-1"><a href="Condition.html">Condition</a></li>
          <li class="api apilevel-1"><a href="Lock.html">Lock</a></li>
          <li class="api apilevel-1"><a href="ReadWriteLock.html">ReadWriteLock</a></li>
      </ul>
    </li>
    
    <li><h2>Classes</h2>
      <ul>
          <li class="api apilevel-5"><a href="AbstractOwnableSynchronizer.html">AbstractOwnableSynchronizer</a></li>
          <li class="api apilevel-9"><a href="AbstractQueuedLongSynchronizer.html">AbstractQueuedLongSynchronizer</a></li>
          <li class="api apilevel-9"><a href="AbstractQueuedLongSynchronizer.ConditionObject.html">AbstractQueuedLongSynchronizer.ConditionObject</a></li>
          <li class="api apilevel-1"><a href="AbstractQueuedSynchronizer.html">AbstractQueuedSynchronizer</a></li>
          <li class="api apilevel-1"><a href="AbstractQueuedSynchronizer.ConditionObject.html">AbstractQueuedSynchronizer.ConditionObject</a></li>
          <li class="api apilevel-1"><a href="LockSupport.html">LockSupport</a></li>
          <li class="api apilevel-1"><a href="ReentrantLock.html">ReentrantLock</a></li>
          <li class="api apilevel-1"><a href="ReentrantReadWriteLock.html">ReentrantReadWriteLock</a></li>
          <li class="api apilevel-1"><a href="ReentrantReadWriteLock.ReadLock.html">ReentrantReadWriteLock.ReadLock</a></li>
          <li class="api apilevel-1"><a href="ReentrantReadWriteLock.WriteLock.html">ReentrantReadWriteLock.WriteLock</a></li>
          <li class="selected api apilevel-24"><a href="StampedLock.html">StampedLock</a></li>
      </ul>
    </li>
    
    
    
  </ul>
  
</div>





    

    
    



<div class="wrap">
  <footer class="dac-footer ">
    <div class="cols dac-footer-main">
      <div class="col-1of2">
        <a class="dac-footer-getnews" id="newsletter" data-modal-toggle="newsletter" title="Sign up for the newsletter">
          Get news &amp; tips <span class="dac-fab dac-primary"><i class="dac-sprite dac-mail"></i><span class="hide-text">Sign up for the newsletter</span></span>
        </a>
      </div>
      <div class="col-1of2 dac-footer-reachout">
        <div class="dac-footer-contact">
          <a class="dac-footer-contact-link" href="http://android-developers.blogspot.com/" title="Blog">Blog</a>
          <a class="dac-footer-contact-link" href="https://developer.android.com/support.html" title="Support">Support</a>
        </div>
        <div class="dac-footer-social">
          <a class="dac-button-social dac-youtube dac-footer-social-link" href="https://www.youtube.com/user/androiddevelopers" title="Android Developers on YouTube"><i class="dac-sprite dac-youtube"></i><span class="hide-text">Android Developers on YouTube</span></a>
          <a class="dac-button-social dac-gplus dac-footer-social-link" href="https://plus.google.com/+AndroidDevelopers" title="Android Developers on Google+"><i class="dac-sprite dac-gplus"></i><span class="hide-text">Android Developers on Google+</span></a>
          <a class="dac-button-social dac-twitter dac-footer-social-link" href="https://twitter.com/AndroidDev" title="Android Developers on Twitter"><i class="dac-sprite dac-twitter"></i><span class="hide-text">Android Developers on Twitter</span></a>
        </div>
      </div>
    </div>

    <hr class="dac-footer-separator"/>
      
      <p class="dac-footer-copyright">
        Except as noted, this content is
        licensed under <a href="http://creativecommons.org/licenses/by/2.5/">
        Creative Commons Attribution 2.5</a>. For details and
        restrictions, see the <a href="https://developer.android.com/license.html">Content
        License</a>.
      </p>
    

    <p class="dac-footer-links">
      <a href="https://developer.android.com/about/android.html" title="About Android">About Android</a>
      <a href="https://developer.android.com/auto/index.html" title="Auto">Auto</a>
      <a href="https://developer.android.com/tv/index.html" title="TV">TV</a>
      <a href="https://developer.android.com/wear/index.html" title="Wear">Wear</a>
      <a href="https://developer.android.com/legal.html" title="Legal">Legal</a>

      <form class="devsite-utility-footer-language" id="setlang" action="https://developer.android.com/i18n/setlang/" method="post">
        <input type="hidden" name="xsrf_token" value="QWlijBCsjqUl3VL8vnm9L8xXIWIOvBgkydHoqvPPHPY6MTQ2NzUxNjQxNTc1NTEyMA" />
        <input type="hidden" name="next" value="StampedLock.html" />
        <span id="language" class="locales">
        <select id="footer_language" name="language">
          
            
            
            <option value="en"
                 selected="selected" >
              English
            </option>
            
            <option value="es"
                >
              español
            </option>
            
            <option value="in"
                >
              Bahasa Indonesia
            </option>
            
            <option value="ja"
                >
              日本語
            </option>
            
            <option value="ko"
                >
              한국어
            </option>
            
            <option value="pt-br"
                >
              Português Brasileiro
            </option>
            
            <option value="ru"
                >
              Русский
            </option>
            
            <option value="vi"
                >
              Tiếng Việt
            </option>
            
            <option value="zh-cn"
                >
              简体中文
            </option>
            
            <option value="zh-tw"
                >
              繁體中文
            </option>
            
          
        </select>
        </span>
      </form>
    </p>
  </footer>
</div><!--/.wrap -->


<div class="dac-toast-group">
  <div class="dac-toast" data-toast>
    <div class="dac-toast-wrap">
      This site uses cookies to store your preferences for site-specific language and display options.
    </div>
  </div>
</div>

<div data-modal="newsletter" data-newsletter data-swap class="dac-modal newsletter">
  <div class="dac-modal-container">
    <div class="dac-modal-window">
      <header class="dac-modal-header">
        <div class="dac-modal-header-actions">
          <button class="dac-modal-header-close" data-modal-toggle></button>
        </div>
        <div class="dac-swap" data-swap-container>
          <section class="dac-swap-section dac-active dac-down">
            <h2 class="norule dac-modal-header-title" data-t="newsletter.title"></h2>
            <p class="dac-modal-header-subtitle" data-t="newsletter.requiredHint"></p>
          </section>
          <section class="dac-swap-section dac-up">
            <h2 class="norule dac-modal-header-title" data-t="newsletter.successTitle">Hooray!</h2>
          </section>
        </div>
      </header>
      <div class="dac-swap" data-swap-container>
        <section class="dac-swap-section dac-active dac-left">
          <form action="https://docs.google.com/forms/d/1QgnkzbEJIDu9lMEea0mxqWrXUJu0oBCLD7ar23V0Yys/formResponse" class="dac-form" method="post" target="dac-newsletter-iframe">
            <input type="hidden" name="entry.935454734" data-newsletter-language>
            <section class="dac-modal-content">
              <fieldset class="dac-form-fieldset">
                <div class="cols">
                  <div class="col-1of2 newsletter-leftCol">
                    <div class="dac-form-input-group">
                      <label for="newsletter-full-name" class="dac-form-floatlabel" data-t="newsletter.name">Full name</label>
                      <input type="text" class="dac-form-input" name="entry.1357890476" id="newsletter-full-name" required>
                      <span class="dac-form-required">*</span>
                    </div>
                    <div class="dac-form-input-group">
                      <label for="newsletter-email" class="dac-form-floatlabel" data-t="newsletter.email">Email address</label>
                      <input type="email" class="dac-form-input" name="entry.472100832" id="newsletter-email" required>
                      <span class="dac-form-required">*</span>
                    </div>
                  </div>
                  <div class="col-1of2 newsletter-rightCol">
                    <div class="dac-form-input-group">
                      <label for="newsletter-company" class="dac-form-floatlabel" data-t="newsletter.company">Company / developer name</label>
                      <input type="text" class="dac-form-input" name="entry.1664780309" id="newsletter-company">
                    </div>
                    <div class="dac-form-input-group">
                      <label for="newsletter-play-store" class="dac-form-floatlabel" data-t="newsletter.appUrl">One of your Play Store app URLs</label>
                      <input type="url" class="dac-form-input" name="entry.47013838" id="newsletter-play-store" required>
                      <span class="dac-form-required">*</span>
                    </div>
                  </div>
                </div>
              </fieldset>
              <fieldset class="dac-form-fieldset">
                <div class="cols">
                  <div class="col-1of2 newsletter-leftCol">
                    <legend class="dac-form-legend"><span data-t="newsletter.business.label">Which best describes your business:</span><span class="dac-form-required">*</span>
                    </legend>
                    <div class="dac-form-radio-group">
                      <input type="radio" value="Apps" class="dac-form-radio" name="entry.1796324055" id="newsletter-business-type-app" required>
                      <label for="newsletter-business-type-app" class="dac-form-radio-button"></label>
                      <label for="newsletter-business-type-app" class="dac-form-label" data-t="newsletter.business.apps">Apps</label>
                    </div>
                    <div class="dac-form-radio-group">
                      <input type="radio" value="Games" class="dac-form-radio" name="entry.1796324055" id="newsletter-business-type-games" required>
                      <label for="newsletter-business-type-games" class="dac-form-radio-button"></label>
                      <label for="newsletter-business-type-games" class="dac-form-label" data-t="newsletter.business.games">Games</label>
                    </div>
                    <div class="dac-form-radio-group">
                      <input type="radio" value="Apps and Games" class="dac-form-radio" name="entry.1796324055" id="newsletter-business-type-appsgames" required>
                      <label for="newsletter-business-type-appsgames" class="dac-form-radio-button"></label>
                      <label for="newsletter-business-type-appsgames" class="dac-form-label" data-t="newsletter.business.both">Apps &amp; Games</label>
                    </div>
                  </div>
                  <div class="col-1of2 newsletter-rightCol newsletter-checkboxes">
                    <div class="dac-form-radio-group">
                      <div class="dac-media">
                        <div class="dac-media-figure">
                          <input type="checkbox" class="dac-form-checkbox" name="entry.732309842" id="newsletter-add" required value="Add me to the mailing list for the monthly newsletter and occasional emails about development and Google Play opportunities.">
                          <label for="newsletter-add" class="dac-form-checkbox-button"></label>
                        </div>
                        <div class="dac-media-body">
                          <label for="newsletter-add" class="dac-form-label dac-form-aside"><span data-t="newsletter.confirmMailingList"></span><span class="dac-form-required">*</span></label>
                        </div>
                      </div>
                    </div>
                    <div class="dac-form-radio-group">
                      <div class="dac-media">
                        <div class="dac-media-figure">
                          <input type="checkbox" class="dac-form-checkbox" name="entry.2045036090" id="newsletter-terms" required value="I acknowledge that the information provided in this form will be subject to Google's privacy policy (https://www.google.com/policies/privacy/).">
                          <label for="newsletter-terms" class="dac-form-checkbox-button"></label>
                        </div>
                        <div class="dac-media-body">
                          <label for="newsletter-terms" class="dac-form-label dac-form-aside"><span data-t="newsletter.privacyPolicy" data-t-html></span><span class="dac-form-required">*</span></label>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </fieldset>
            </section>
            <footer class="dac-modal-footer">
              <div class="cols">
                <div class="col-2of5">
                </div>
              </div>
              <button type="submit" value="Submit" class="dac-fab dac-primary dac-large dac-modal-action"><i class="dac-sprite dac-arrow-right"></i></button>
            </footer>
          </form>
        </section>
        <section class="dac-swap-section dac-right">
          <div class="dac-modal-content">
            <p class="newsletter-success-message" data-t="newsletter.successDetails"></p>
          </div>
        </section>
      </div>
    </div>
  </div>
</div><!--/.dac-modal.newsletter-->


<div data-modal="langform" class="dac-modal" id="langform">
  <div class="dac-modal-container">
    <div class="dac-modal-window">
      <header class="dac-modal-header">
        <div class="dac-modal-header-actions">
          <button class="dac-modal-header-close" data-modal-toggle></button>
        </div>
        <section class="dac-swap-section dac-active dac-down">
          <h2 class="norule dac-modal-header-title"></h2>
        </section>
      </header>
      <section class="dac-swap-section dac-active dac-left">
          <section class="dac-modal-content">
            <fieldset class="dac-form-fieldset">
              <div class="cols">
                <div class="col-2of2 langform-leftCol">
                  <p id="resetLangText"></p>
                  <p id="resetLangCta"></p>
                </div>
              </div>
            </fieldset>
          </section>
          <footer class="dac-modal-footer" id="langfooter">
            <div class="cols">
              <div class="col-2of5">
              </div>
            </div>
            <a href="#" class="yes" onclick="return false;">
              <button class="button dac-primary dac-modal-action lang yes" data-t="newsletter.resetLangButtonYes" data-modal-toggle></button>
            </a>
            <a href="#" class="" onclick="return false;">
              <button class="button dac-primary dac-modal-action lang no" data-t="newsletter.resetLangButtonNo" data-modal-toggle></button>
            </a>
          </footer>
        </form>
      </section>
    </div>
  </div>
</div><!--/.dac-modal-->


<div data-modal="api-unavailable" class="dac-modal" id="api-unavailable">
  <div class="dac-modal-container">
    <div class="dac-modal-window">
      <header class="dac-modal-header">
        <div class="dac-modal-header-actions">
          <button class="dac-modal-header-close" data-modal-toggle></button>
        </div>
        <section class="dac-swap-section dac-active dac-down">
          <h2 class="norule dac-modal-header-title">
            This class requires API level <span class="api-level"></span>
            or higher
          </h2>
        </section>
      </header>
      <section class="dac-swap-section dac-active dac-left">
          <section class="dac-modal-content">

      <p>This doc is hidden because your selected API level for the
      documentation is <span class="selected-level"></span>. You can change the
      documentation API level with the selector above the left navigation.</p>

      <p>For more information about specifying the API level your app requires,
      read <a
      href="https://developer.android.com/training/basics/supporting-devices/platforms.html">Supporting
      Different Platform Versions</a>.</p>

          </section>
          <footer class="dac-modal-footer" id="langfooter">
            <div class="cols">
              <div class="col-2of5">
              </div>
            </div>
            <a href="#" class="ok" onclick="return false;">
              <button class="button dac-primary dac-modal-action ok"
              data-modal-toggle>
                OK, make this page visible
              </button>
            </a>
          </footer>
        </form>
      </section>
    </div>
  </div>
</div><!--/.dac-modal#api-unavailable-->

    
  </div><!--/#body-content-->

  <!-- Nav Setup -->
  <script>$('[data-dac-nav]').dacNav();</script>
  <script type="text/javascript">
    $('.slideshow-container').dacSlideshow({
        btnPrev: '.slideshow-prev',
        btnNext: '.slideshow-next',
        btnPause: '#pauseButton'
    });

    $(".feed").dacTabbedList({
      nav_id: '.feed-nav',
      frame_id: '.feed-frame'
    });
  </script>
  
  <script src="https://developer.android.com/ytblogger_lists_unified.js?v=2016070303" defer></script>
  <script src="https://developer.android.com/jd_lists_unified_en.js?v=2016070303" defer></script>
  <script src="../../../../lists8666.js?v=2016070303" defer></script>
  <script src="../../../../gcm_lists8666.js?v=2016070303" defer></script>
  <script src="../../../../gms_lists8666.js?v=2016070303" defer></script>
  <script src="../../../../android/support/wearable/lists8666.js?v=2016070303" defer></script>
  <script src="../../../../android/support/test/lists8666.js?v=2016070303" defer></script>
  <script src="https://developer.android.com/_static2/c54aa247ac/jsi18n/"></script>

  <script>
    // Load localized metadata.
    (function(lang) {
      if (lang === 'en') { return; }
      // Write it to the document so it gets evaluated before DOMContentReady.
      document.write('<script src="/jd_lists_unified_' + lang + '.js?v=2016070303" defer></' + 'script>');
    })(getLangPref())

    // Add skip to content for accessibility.
    $('#skip-to-main').click(function() {
      $('a[name=top]').focus();
    });

    $('#setlang select').each(function() {
      $(this).change(function() {
        changeLangPref(this.value, true)
        $('#setlang').submit();
      });
    });
  </script>

  <script src="https://developer.android.com/_static/c54aa247ac/js/script_foot_closure_android.js"></script>
  <script>
    (function($) {
      devsite.analytics.InitAnalytics();
    })(jQuery);
  </script>

</body>

<!-- Mirrored from developer.android.com/reference/java/util/concurrent/locks/StampedLock.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 03 Jul 2016 03:32:48 GMT -->
</html>
